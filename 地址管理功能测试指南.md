# 地址管理功能测试指南

## 📅 完成时间
2026-01-08

## ✅ 已完成功能

### 1. API封装 (api/address.js)
- ✅ `getAddressList()` - 查询地址列表
- ✅ `getDefaultAddress()` - 获取默认地址
- ✅ `getAddressDetail(id)` - 获取地址详情
- ✅ `saveAddress(data)` - 新增/修改地址
- ✅ `deleteAddress(id)` - 删除地址

### 2. 地址列表页面 (pages/address/list.vue)
- ✅ 地址列表展示
- ✅ 默认地址标识
- ✅ 下拉刷新
- ✅ 编辑地址
- ✅ 删除地址（带确认弹窗）
- ✅ 设置默认地址
- ✅ 空状态提示
- ✅ 从订单页选择地址功能

### 3. 地址编辑页面 (pages/address/edit.vue)
- ✅ 新增/编辑两种模式
- ✅ 联系人输入
- ✅ 联系电话输入（带格式验证）
- ✅ 省市区选择
- ✅ 详细地址输入
- ✅ 设为默认地址开关
- ✅ 表单验证
- ✅ 数据回显（编辑模式）

### 4. 集成配置
- ✅ pages.json路由配置
- ✅ 个人中心入口更新

---

## 🧪 测试步骤

### 测试1: 添加新地址
```
1. 打开小程序，进入"我的"
2. 点击"我的地址簿"
3. 点击底部"添加新地址"按钮
4. 填写表单：
   - 联系人：张三
   - 联系电话：13800138000
   - 所在地区：选择省/市/区
   - 详细地址：xx大学xx宿舍
   - 设为默认：开启
5. 点击"保存"
6. 预期结果：提示"添加成功"，返回列表页，显示新添加的地址
```

### 测试2: 编辑地址
```
1. 在地址列表页，点击某个地址的"编辑"按钮
2. 修改联系人姓名
3. 点击"保存"
4. 预期结果：提示"修改成功"，列表数据更新
```

### 测试3: 删除地址
```
1. 在地址列表页，点击某个地址的"删除"按钮
2. 弹出确认弹窗
3. 点击"删除"
4. 预期结果：提示"删除成功"，地址从列表中移除
```

### 测试4: 设置默认地址
```
1. 在地址列表页，找到非默认地址
2. 点击"设为默认"按钮
3. 预期结果：提示"设置成功"，该地址显示"默认"标签
```

### 测试5: 表单验证
```
测试5.1: 联系人为空
1. 点击"添加新地址"
2. 不填写联系人，直接保存
3. 预期结果：提示"请输入联系人姓名"

测试5.2: 手机号格式错误
1. 联系电话输入：123456
2. 点击保存
3. 预期结果：提示"请输入正确的手机号"

测试5.3: 地区未选择
1. 不选择所在地区
2. 点击保存
3. 预期结果：提示"请选择所在地区"

测试5.4: 详细地址为空
1. 不填写详细地址
2. 点击保存
3. 预期结果：提示"请输入详细地址"
```

### 测试6: 下拉刷新
```
1. 在地址列表页
2. 下拉页面
3. 预期结果：显示刷新动画，列表数据重新加载
```

### 测试7: 空状态
```
1. 删除所有地址
2. 预期结果：显示空状态提示"暂无收货地址"
```

---

## 🔍 调试技巧

### 1. 查看API请求
```javascript
// 浏览器控制台会输出详细日志
console.log('✅ 地址列表加载成功:', addressList)
```

### 2. 检查网络请求
```
微信开发者工具 -> Network
查看请求地址：http://localhost:9090/api/address/list
```

### 3. 常见问题排查

**问题1: 地址列表为空**
- 检查后端是否返回数据
- 检查API地址是否正确
- 查看控制台错误日志

**问题2: 保存失败**
- 检查表单验证是否通过
- 检查必填项是否填写
- 查看后端返回的错误信息

**问题3: 路由跳转失败**
- 检查pages.json是否正确配置
- 检查路径是否正确
- 查看编译后的项目结构

---

## 📝 后续优化建议

### 短期优化
1. **地图选点**
   - 集成腾讯地图/高德地图
   - 支持地图选点自动填充地址

2. **地址搜索**
   - 添加搜索功能
   - 快速查找历史地址

3. **地址标签**
   - 添加"家"、"公司"、"学校"等快捷标签

### 长期优化
1. **智能推荐**
   - 根据下单频率推荐地址
   - 智能排序

2. **地址分享**
   - 支持地址分享功能
   - 快速复制地址信息

3. **批量操作**
   - 支持批量删除地址
   - 地址导出功能

---

## 🎯 功能演示流程

```
我的 → 地址管理 → 添加地址 → 填写信息 → 保存成功
                ↓
            查看地址列表
                ↓
            编辑地址/删除地址
                ↓
            设置默认地址
```

---

## ✅ 验收标准

- [ ] 可以成功添加新地址
- [ ] 可以编辑已有地址
- [ ] 可以删除地址（有确认）
- [ ] 可以设置默认地址
- [ ] 表单验证正常工作
- [ ] 下拉刷新功能正常
- [ ] 空状态显示正常
- [ ] 页面跳转流畅
- [ ] API调用成功
- [ ] 错误提示友好

---

## 📞 技术支持

如遇到问题，请检查：
1. 后端服务是否启动（http://localhost:9090）
2. 数据库连接是否正常
3. Token是否有效
4. 控制台是否有错误日志

---

**开发完成！** 🎉

地址管理模块已完整对接，可以进行测试了。
