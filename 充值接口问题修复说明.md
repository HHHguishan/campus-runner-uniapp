# å……å€¼æ¥å£é—®é¢˜ä¿®å¤è¯´æ˜

## ğŸ› é—®é¢˜æè¿°

æµ‹è¯•å……å€¼åŠŸèƒ½æ—¶æŠ¥é”™ï¼š
```
Required request parameter 'amount' for method parameter type BigDecimal is not present
```

## ğŸ” é—®é¢˜åŸå› 

### åç«¯æ¥å£å®šä¹‰
```java
@PostMapping("/mock/recharge")
public Result recharge(@RequestParam BigDecimal amount) {
    // ...
}
```

åç«¯ä½¿ç”¨ `@RequestParam` æ¥æ”¶å‚æ•°ï¼Œè¯¥æ³¨è§£é»˜è®¤ä»ä»¥ä¸‹ä½ç½®è·å–å‚æ•°ï¼š
1. **URLæŸ¥è¯¢å‚æ•°**ï¼š`/mock/recharge?amount=100`
2. **è¡¨å•æ•°æ®**ï¼šPOSTè¯·æ±‚ï¼ŒContent-Typeä¸º`application/x-www-form-urlencoded`

### å‰ç«¯åŸå§‹è°ƒç”¨
```javascript
// âŒ é”™è¯¯æ–¹å¼ï¼šå‘é€JSONæ ¼å¼
export function recharge(data) {
  return post('/wallet/mock/recharge', data)
}
```

å‰ç«¯ä½¿ç”¨POSTæ–¹æ³•å‘é€JSONæ ¼å¼çš„æ•°æ®ï¼ˆ`{"amount": 100}`ï¼‰ï¼Œä½†è¿™ä¸æ˜¯ `@RequestParam` èƒ½è¯»å–çš„ä½ç½®ï¼Œå¯¼è‡´åç«¯æ‰¾ä¸åˆ°å‚æ•°ã€‚

---

## âœ… è§£å†³æ–¹æ¡ˆ

### ä¿®æ”¹åçš„ä»£ç 
```javascript
// âœ… æ­£ç¡®æ–¹å¼ï¼šå°†amountä½œä¸ºæŸ¥è¯¢å‚æ•°
export function recharge(data) {
  const amount = Number(data.amount).toFixed(2)
  const url = `/wallet/mock/recharge?amount=${amount}`
  return post(url, {})
}
```

### å®é™…è¯·æ±‚
```
POST /api/wallet/mock/recharge?amount=100.00
```

è¿™æ ·åç«¯çš„ `@RequestParam` å°±èƒ½ä»URLæŸ¥è¯¢å‚æ•°ä¸­æ­£ç¡®è¯»å–åˆ° `amount` å€¼ã€‚

---

## ğŸ“‹ æŠ€æœ¯è¯´æ˜

### @RequestParam vs @RequestBody

| æ³¨è§£ | å‚æ•°æ¥æº | Content-Type | ä½¿ç”¨åœºæ™¯ |
|------|---------|--------------|---------|
| @RequestParam | URLæŸ¥è¯¢å‚æ•°æˆ–è¡¨å•æ•°æ® | form-urlencoded | ç®€å•å‚æ•° |
| @RequestBody | è¯·æ±‚ä½“ | application/json | å¤æ‚å¯¹è±¡ |

### ä¸ºä»€ä¹ˆä¸èƒ½å‘é€JSONï¼Ÿ

```java
// âŒ åç«¯å®šä¹‰
@PostMapping("/mock/recharge")
public Result recharge(@RequestParam BigDecimal amount) {
    // æœŸæœ›ä»URLæˆ–è¡¨å•ä¸­è·å–amount
}

// âŒ å‰ç«¯å‘é€ï¼ˆé”™è¯¯ï¼‰
fetch('/api/wallet/mock/recharge', {
  method: 'POST',
  body: JSON.stringify({ amount: 100 })  // JSONæ ¼å¼ï¼Œ@RequestParamè¯»å–ä¸åˆ°
})
```

### æ­£ç¡®çš„å‘é€æ–¹å¼

**æ–¹å¼1ï¼šæŸ¥è¯¢å‚æ•°** âœ…
```javascript
fetch('/api/wallet/mock/recharge?amount=100', {
  method: 'POST'
})
```

**æ–¹å¼2ï¼šè¡¨å•æ•°æ®** âœ…
```javascript
fetch('/api/wallet/mock/recharge', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/x-www-form-urlencoded'
  },
  body: 'amount=100'
})
```

---

## ğŸ”§ ä¿®æ”¹å†…å®¹

### æ–‡ä»¶ï¼š`api/wallet.js`

```diff
export function recharge(data) {
-  return post('/wallet/mock/recharge', data)
+  // åç«¯ä½¿ç”¨@RequestParamæ¥æ”¶å‚æ•°
+  // éœ€è¦å°†amountä½œä¸ºæŸ¥è¯¢å‚æ•°ä¼ é€’
+  const amount = Number(data.amount).toFixed(2)
+  const url = `/wallet/mock/recharge?amount=${amount}`
+  return post(url, {})
}
```

---

## ğŸ§ª æµ‹è¯•éªŒè¯

### æµ‹è¯•æ­¥éª¤
1. æ‰“å¼€é’±åŒ…é¡µé¢
2. é€‰æ‹©å¿«æ·å……å€¼é‡‘é¢ï¼ˆå¦‚100å…ƒï¼‰
3. ç‚¹å‡»ç¡®è®¤å……å€¼
4. æ£€æŸ¥ç½‘ç»œè¯·æ±‚

### é¢„æœŸç»“æœ
```javascript
// è¯·æ±‚URL
POST /api/wallet/mock/recharge?amount=100.00

// è¯·æ±‚æˆåŠŸ
{
  "code": 200,
  "message": "å……å€¼æˆåŠŸ",
  "data": null
}

// ä½™é¢æ›´æ–°
é’±åŒ…ä½™é¢å¢åŠ  100.00 å…ƒ
```

---

## ğŸ’¡ æœ€ä½³å®è·µå»ºè®®

### åç«¯æ¥å£è®¾è®¡å»ºè®®

å¦‚æœè¦æ¥æ”¶JSONæ•°æ®ï¼Œåº”è¯¥ä½¿ç”¨ `@RequestBody`ï¼š

```java
// âœ… æ¨èçš„åç«¯æ¥å£å®šä¹‰
@PostMapping("/mock/recharge")
public Result recharge(@RequestBody RechargeRequest request) {
    BigDecimal amount = request.getAmount();
    // ...
}

// æˆ–è€…ä½¿ç”¨DTOå¯¹è±¡
@Data
public class RechargeRequest {
    private BigDecimal amount;
}
```

### å‰ç«¯APIè°ƒç”¨è§„èŒƒ

```javascript
// æ–¹å¼1ï¼šç®€å•å‚æ•°ï¼ˆä½¿ç”¨@RequestParamæˆ–@PathVariableï¼‰
export function recharge(amount) {
  return post(`/wallet/mock/recharge?amount=${amount}`, {})
}

// æ–¹å¼2ï¼šå¤æ‚å¯¹è±¡ï¼ˆä½¿ç”¨@RequestBodyï¼‰
export function recharge(data) {
  return post('/wallet/mock/recharge', {
    amount: data.amount,
    userId: data.userId,
    remark: data.remark
  })
}
```

---

## ğŸ“Š å…¶ä»–éœ€è¦æ³¨æ„çš„æ¥å£

æ ¹æ®APIæ–‡æ¡£ï¼Œä»¥ä¸‹æ¥å£ä¹Ÿå¯èƒ½å­˜åœ¨ç±»ä¼¼é—®é¢˜ï¼š

### æ”¯ä»˜æ¥å£
```
POST /api/pay/doPay
```
å¦‚æœåç«¯ä½¿ç”¨ `@RequestParam`ï¼Œä¹Ÿéœ€è¦è°ƒæ•´å‰ç«¯è°ƒç”¨æ–¹å¼ã€‚

### è®¢å•æ¥å£
```
POST /api/order/create
PUT /api/order/cancel
```
è¿™äº›é€šå¸¸ä½¿ç”¨ `@RequestBody` æ¥æ”¶JSONï¼Œåº”è¯¥æ²¡é—®é¢˜ã€‚

---

## âœ… éªŒæ”¶æ ‡å‡†

- [ ] å……å€¼æ¥å£è°ƒç”¨æˆåŠŸ
- [ ] ä½™é¢æ­£ç¡®æ›´æ–°
- [ ] äº¤æ˜“è®°å½•æ–°å¢
- [ ] æ— æŠ¥é”™æ—¥å¿—

---

**ä¿®å¤å®Œæˆï¼** ğŸ‰

ç°åœ¨å¯ä»¥é‡æ–°æµ‹è¯•å……å€¼åŠŸèƒ½äº†ã€‚å¦‚æœè¿˜æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. åç«¯æ—¥å¿—ä¸­æ˜¯å¦æ­£ç¡®æ¥æ”¶åˆ°amountå‚æ•°
2. å‰ç«¯ç½‘ç»œè¯·æ±‚çš„URLæ ¼å¼
3. å‚æ•°å€¼æ˜¯å¦æ­£ç¡®ä¼ é€’
