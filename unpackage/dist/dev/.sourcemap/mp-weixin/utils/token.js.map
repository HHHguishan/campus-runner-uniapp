{"version":3,"file":"token.js","sources":["utils/token.js"],"sourcesContent":["/**\r\n * Token管理工具\r\n * 负责Token的存储、获取、清除\r\n */\r\n\r\nimport { TOKEN_KEY, USER_INFO_KEY } from './config.js'\r\n\r\n/**\r\n * 存储Token\r\n * @param {String} token - JWT Token\r\n */\r\nexport function setToken(token) {\r\n\tuni.setStorageSync(TOKEN_KEY, token)\r\n}\r\n\r\n/**\r\n * 获取Token\r\n * @returns {String} Token\r\n */\r\nexport function getToken() {\r\n\treturn uni.getStorageSync(TOKEN_KEY) || ''\r\n}\r\n\r\n/**\r\n * 清除Token\r\n */\r\nexport function removeToken() {\r\n\tuni.removeStorageSync(TOKEN_KEY)\r\n}\r\n\r\n/**\r\n * 存储用户信息\r\n * @param {Object} userInfo - 用户信息对象\r\n */\r\nexport function setUserInfo(userInfo) {\r\n\tuni.setStorageSync(USER_INFO_KEY, JSON.stringify(userInfo))\r\n}\r\n\r\n/**\r\n * 获取用户信息\r\n * @returns {Object} 用户信息对象\r\n */\r\nexport function getUserInfo() {\r\n\tconst userInfoStr = uni.getStorageSync(USER_INFO_KEY)\r\n\treturn userInfoStr ? JSON.parse(userInfoStr) : null\r\n}\r\n\r\n/**\r\n * 清除用户信息\r\n */\r\nexport function removeUserInfo() {\r\n\tuni.removeStorageSync(USER_INFO_KEY)\r\n}\r\n\r\n/**\r\n * 清除所有登录信息（Token + 用户信息）\r\n */\r\nexport function clearAuth() {\r\n\tremoveToken()\r\n\tremoveUserInfo()\r\n}\r\n\r\n/**\r\n * 检查是否已登录\r\n * @returns {Boolean} 是否已登录\r\n */\r\nexport function isLoggedIn() {\r\n\tconst token = getToken()\r\n\treturn !!token\r\n}\r\n"],"names":["uni","TOKEN_KEY","USER_INFO_KEY"],"mappings":";;;AAWO,SAAS,SAAS,OAAO;AAC/BA,sBAAI,eAAeC,aAAS,WAAE,KAAK;AACpC;AAMO,SAAS,WAAW;AAC1B,SAAOD,oBAAI,eAAeC,aAAS,SAAA,KAAK;AACzC;AAKO,SAAS,cAAc;AAC7BD,gBAAG,MAAC,kBAAkBC,sBAAS;AAChC;AAMO,SAAS,YAAY,UAAU;AACrCD,gBAAG,MAAC,eAAeE,aAAa,eAAE,KAAK,UAAU,QAAQ,CAAC;AAC3D;AAMO,SAAS,cAAc;AAC7B,QAAM,cAAcF,cAAAA,MAAI,eAAeE,0BAAa;AACpD,SAAO,cAAc,KAAK,MAAM,WAAW,IAAI;AAChD;AAKO,SAAS,iBAAiB;AAChCF,gBAAG,MAAC,kBAAkBE,0BAAa;AACpC;AAKO,SAAS,YAAY;AAC3B,cAAa;AACb,iBAAgB;AACjB;;;;;;;;"}