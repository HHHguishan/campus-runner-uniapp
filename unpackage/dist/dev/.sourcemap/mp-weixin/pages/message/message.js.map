{"version":3,"file":"message.js","sources":["pages/message/message.vue","D:/Users/windows/Downloads/HBuilderX.4.85.2025110510/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbWVzc2FnZS9tZXNzYWdlLnZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"message-container\">\r\n    <!-- ÂäüËÉΩÂÖ•Âè£ÂàóË°® -->\r\n    <view class=\"function-list\">\r\n      <!-- Á≥ªÁªüÂÖ¨Âëä -->\r\n      <view class=\"function-item\" @tap=\"goToNotice\">\r\n        <view class=\"item-left\">\r\n          <view class=\"item-icon notice-icon\">üì¢</view>\r\n          <view class=\"item-info\">\r\n            <text class=\"item-title\">Á≥ªÁªüÂÖ¨Âëä</text>\r\n            <text class=\"item-desc\">Êü•ÁúãÊúÄÊñ∞Á≥ªÁªüÂÖ¨ÂëäÂíåÊ¥ªÂä®ÈÄöÁü•</text>\r\n          </view>\r\n        </view>\r\n        <view class=\"item-right\">\r\n          <text class=\"arrow\">‚Ä∫</text>\r\n        </view>\r\n      </view>\r\n\r\n      <!-- ËÆ¢ÂçïÊ∂àÊÅØ -->\r\n      <view class=\"function-item\" @tap=\"goToOrders\">\r\n        <view class=\"item-left\">\r\n          <view class=\"item-icon order-icon\">üì¶</view>\r\n          <view class=\"item-info\">\r\n            <text class=\"item-title\">ËÆ¢ÂçïÊ∂àÊÅØ</text>\r\n            <text class=\"item-desc\">Êü•ÁúãËÆ¢ÂçïÁõ∏ÂÖ≥ÁöÑÈÄöÁü•Ê∂àÊÅØ</text>\r\n          </view>\r\n        </view>\r\n        <view class=\"item-right\">\r\n          <view class=\"badge\" v-if=\"unreadCount > 0\">{{ unreadCount }}</view>\r\n          <text class=\"arrow\">‚Ä∫</text>\r\n        </view>\r\n      </view>\r\n\r\n      <!-- Á≥ªÁªüÈÄöÁü• -->\r\n      <view class=\"function-item\">\r\n        <view class=\"item-left\">\r\n          <view class=\"item-icon system-icon\">üîî</view>\r\n          <view class=\"item-info\">\r\n            <text class=\"item-title\">Á≥ªÁªüÈÄöÁü•</text>\r\n            <text class=\"item-desc\">Ë¥¶Êà∑ÂèòÂä®„ÄÅÂÆâÂÖ®ÊèêÈÜíÁ≠â</text>\r\n          </view>\r\n        </view>\r\n        <view class=\"item-right\">\r\n          <text class=\"arrow\">‚Ä∫</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- ÊúÄÊñ∞ÂÖ¨ÂëäÈ¢ÑËßà -->\r\n    <view class=\"latest-notice\" v-if=\"latestNotice\" @tap=\"goToNotice\">\r\n      <view class=\"notice-header\">\r\n        <text class=\"section-title\">üì¢ ÊúÄÊñ∞ÂÖ¨Âëä</text>\r\n        <text class=\"more-btn\">Êü•ÁúãÊõ¥Â§ö ‚Ä∫</text>\r\n      </view>\r\n      <view class=\"notice-card\">\r\n        <text class=\"notice-title-text\">{{ latestNotice.title }}</text>\r\n        <text class=\"notice-time-text\">{{ formatTime(latestNotice.createTime) }}</text>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- ÊöÇÊó†Ê∂àÊÅØÊèêÁ§∫ -->\r\n    <view class=\"empty-tips\" v-if=\"!latestNotice\">\r\n      <text class=\"tips-icon\">üí¨</text>\r\n      <text class=\"tips-text\">ÊöÇÊó†Êñ∞Ê∂àÊÅØ</text>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { getNoticeList } from '../../api/notice.js'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      latestNotice: null,\r\n      unreadCount: 0\r\n    }\r\n  },\r\n\r\n  onLoad() {\r\n    this.loadLatestNotice()\r\n  },\r\n\r\n  methods: {\r\n    // Âä†ËΩΩÊúÄÊñ∞ÂÖ¨Âëä\r\n    async loadLatestNotice() {\r\n      try {\r\n        console.log('=== ÂºÄÂßãÂä†ËΩΩÊúÄÊñ∞ÂÖ¨Âëä ===')\r\n\r\n        const res = await getNoticeList({ type: 1 })\r\n\r\n        console.log('ÊúÄÊñ∞ÂÖ¨ÂëäAPIÂìçÂ∫î:', res)\r\n        console.log('ÂìçÂ∫îÊï∞ÊçÆ:', res.data)\r\n\r\n        if (res.code === 200 && res.data) {\r\n          const noticeData = Array.isArray(res.data) ? res.data : []\r\n\r\n          console.log('ÂÖ¨ÂëäÊï∞Èáè:', noticeData.length)\r\n\r\n          if (noticeData.length > 0) {\r\n            // ÂèñÁ¨¨‰∏ÄÊù°‰Ωú‰∏∫ÊúÄÊñ∞ÂÖ¨Âëä\r\n            this.latestNotice = noticeData[0]\r\n            console.log('ÊúÄÊñ∞ÂÖ¨Âëä:', this.latestNotice)\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('=== Âä†ËΩΩÊúÄÊñ∞ÂÖ¨ÂëäÂ§±Ë¥• ===')\r\n        console.error('ÈîôËØØ‰ø°ÊÅØ:', error)\r\n      }\r\n    },\r\n\r\n    // Ë∑≥ËΩ¨Âà∞ÂÖ¨ÂëäÈ°µÈù¢\r\n    goToNotice() {\r\n      uni.navigateTo({\r\n        url: '/pages/notice/notice'\r\n      })\r\n    },\r\n\r\n    // Ë∑≥ËΩ¨Âà∞ËÆ¢ÂçïÈ°µÈù¢\r\n    goToOrders() {\r\n      uni.switchTab({\r\n        url: '/pages/orders/orders'\r\n      })\r\n    },\r\n\r\n    // Ê†ºÂºèÂåñÊó∂Èó¥\r\n    formatTime(time) {\r\n      if (!time) return ''\r\n      const date = new Date(time)\r\n      const now = new Date()\r\n      const diff = now - date\r\n\r\n      if (diff < 3600000) {\r\n        return Math.floor(diff / 60000) + 'ÂàÜÈíüÂâç'\r\n      }\r\n\r\n      if (diff < 86400000) {\r\n        return Math.floor(diff / 3600000) + 'Â∞èÊó∂Ââç'\r\n      }\r\n\r\n      const year = date.getFullYear()\r\n      const month = String(date.getMonth() + 1).padStart(2, '0')\r\n      const day = String(date.getDate()).padStart(2, '0')\r\n      return `${year}-${month}-${day}`\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.message-container {\r\n  min-height: 100vh;\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n/* ÂäüËÉΩÂàóË°® */\r\n.function-list {\r\n  background: #fff;\r\n  margin: 20rpx;\r\n  border-radius: 16rpx;\r\n  overflow: hidden;\r\n}\r\n\r\n.function-item {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 30rpx;\r\n  border-bottom: 2rpx solid #f5f5f5;\r\n}\r\n\r\n.function-item:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.item-left {\r\n  display: flex;\r\n  align-items: center;\r\n  flex: 1;\r\n}\r\n\r\n.item-icon {\r\n  width: 80rpx;\r\n  height: 80rpx;\r\n  border-radius: 16rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 40rpx;\r\n  margin-right: 24rpx;\r\n}\r\n\r\n.notice-icon {\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n}\r\n\r\n.order-icon {\r\n  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);\r\n}\r\n\r\n.system-icon {\r\n  background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);\r\n}\r\n\r\n.item-info {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.item-title {\r\n  font-size: 30rpx;\r\n  color: #333;\r\n  font-weight: bold;\r\n  margin-bottom: 8rpx;\r\n}\r\n\r\n.item-desc {\r\n  font-size: 24rpx;\r\n  color: #999;\r\n}\r\n\r\n.item-right {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.badge {\r\n  background: #ff4d4f;\r\n  color: #fff;\r\n  font-size: 20rpx;\r\n  padding: 4rpx 12rpx;\r\n  border-radius: 20rpx;\r\n  margin-right: 16rpx;\r\n  min-width: 32rpx;\r\n  text-align: center;\r\n}\r\n\r\n.arrow {\r\n  font-size: 40rpx;\r\n  color: #ccc;\r\n  font-weight: 300;\r\n}\r\n\r\n/* ÊúÄÊñ∞ÂÖ¨Âëä */\r\n.latest-notice {\r\n  background: #fff;\r\n  margin: 20rpx;\r\n  border-radius: 16rpx;\r\n  padding: 30rpx;\r\n}\r\n\r\n.notice-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.section-title {\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.more-btn {\r\n  font-size: 26rpx;\r\n  color: #07c160;\r\n}\r\n\r\n.notice-card {\r\n  background: #f8f8f8;\r\n  padding: 24rpx;\r\n  border-radius: 12rpx;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.notice-title-text {\r\n  font-size: 28rpx;\r\n  color: #333;\r\n  margin-bottom: 12rpx;\r\n}\r\n\r\n.notice-time-text {\r\n  font-size: 24rpx;\r\n  color: #999;\r\n}\r\n\r\n/* Á©∫Áä∂ÊÄÅ */\r\n.empty-tips {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  padding: 200rpx 0;\r\n}\r\n\r\n.tips-icon {\r\n  font-size: 120rpx;\r\n  margin-bottom: 20rpx;\r\n  opacity: 0.5;\r\n}\r\n\r\n.tips-text {\r\n  font-size: 28rpx;\r\n  color: #999;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'E:/Delivery Service Platform/uniapp/pages/message/message.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","getNoticeList"],"mappings":";;;AAuEA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,cAAc;AAAA,MACd,aAAa;AAAA,IACf;AAAA,EACD;AAAA,EAED,SAAS;AACP,SAAK,iBAAiB;AAAA,EACvB;AAAA,EAED,SAAS;AAAA;AAAA,IAEP,MAAM,mBAAmB;AACvB,UAAI;AACFA,sBAAAA,MAAY,MAAA,OAAA,mCAAA,kBAAkB;AAE9B,cAAM,MAAM,MAAMC,WAAAA,cAAc,EAAE,MAAM,GAAG;AAE3CD,sBAAAA,MAAY,MAAA,OAAA,mCAAA,cAAc,GAAG;AAC7BA,sBAAY,MAAA,MAAA,OAAA,mCAAA,SAAS,IAAI,IAAI;AAE7B,YAAI,IAAI,SAAS,OAAO,IAAI,MAAM;AAChC,gBAAM,aAAa,MAAM,QAAQ,IAAI,IAAI,IAAI,IAAI,OAAO,CAAC;AAEzDA,wBAAA,MAAA,MAAA,OAAA,mCAAY,SAAS,WAAW,MAAM;AAEtC,cAAI,WAAW,SAAS,GAAG;AAEzB,iBAAK,eAAe,WAAW,CAAC;AAChCA,0BAAY,MAAA,MAAA,OAAA,oCAAA,SAAS,KAAK,YAAY;AAAA,UACxC;AAAA,QACF;AAAA,MACA,SAAO,OAAO;AACdA,sBAAAA,MAAc,MAAA,SAAA,oCAAA,kBAAkB;AAChCA,sBAAAA,MAAc,MAAA,SAAA,oCAAA,SAAS,KAAK;AAAA,MAC9B;AAAA,IACD;AAAA;AAAA,IAGD,aAAa;AACXA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,OACN;AAAA,IACF;AAAA;AAAA,IAGD,aAAa;AACXA,oBAAAA,MAAI,UAAU;AAAA,QACZ,KAAK;AAAA,OACN;AAAA,IACF;AAAA;AAAA,IAGD,WAAW,MAAM;AACf,UAAI,CAAC;AAAM,eAAO;AAClB,YAAM,OAAO,IAAI,KAAK,IAAI;AAC1B,YAAM,MAAM,oBAAI,KAAK;AACrB,YAAM,OAAO,MAAM;AAEnB,UAAI,OAAO,MAAS;AAClB,eAAO,KAAK,MAAM,OAAO,GAAK,IAAI;AAAA,MACpC;AAEA,UAAI,OAAO,OAAU;AACnB,eAAO,KAAK,MAAM,OAAO,IAAO,IAAI;AAAA,MACtC;AAEA,YAAM,OAAO,KAAK,YAAY;AAC9B,YAAM,QAAQ,OAAO,KAAK,SAAQ,IAAK,CAAC,EAAE,SAAS,GAAG,GAAG;AACzD,YAAM,MAAM,OAAO,KAAK,QAAS,CAAA,EAAE,SAAS,GAAG,GAAG;AAClD,aAAO,GAAG,IAAI,IAAI,KAAK,IAAI,GAAG;AAAA,IAChC;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;ACjJA,GAAG,WAAW,eAAe;"}