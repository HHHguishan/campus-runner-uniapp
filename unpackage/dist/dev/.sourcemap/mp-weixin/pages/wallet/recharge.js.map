{"version":3,"file":"recharge.js","sources":["pages/wallet/recharge.vue","D:/Users/windows/Downloads/HBuilderX.4.85.2025110510/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvd2FsbGV0L3JlY2hhcmdlLnZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"recharge-container\">\r\n    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->\r\n    <view class=\"nav-bar\">\r\n      <view class=\"nav-back\" @click=\"goBack\">\r\n        <text class=\"iconfont\">â€¹</text>\r\n      </view>\r\n      <view class=\"nav-title\">è´¦æˆ·å……å€¼</view>\r\n      <view class=\"nav-placeholder\"></view>\r\n    </view>\r\n\r\n    <!-- å……å€¼é‡‘é¢é€‰æ‹© -->\r\n    <view class=\"recharge-content\">\r\n      <view class=\"amount-section\">\r\n        <view class=\"section-title\">é€‰æ‹©å……å€¼é‡‘é¢</view>\r\n        <view class=\"amount-grid\">\r\n          <view\r\n            class=\"amount-item\"\r\n            :class=\"{ active: selectedAmount === amount }\"\r\n            v-for=\"amount in presetAmounts\"\r\n            :key=\"amount\"\r\n            @click=\"selectAmount(amount)\"\r\n          >\r\n            <text class=\"amount-value\">{{ amount }}</text>\r\n            <text class=\"amount-unit\">å…ƒ</text>\r\n          </view>\r\n        </view>\r\n      </view>\r\n\r\n      <!-- è‡ªå®šä¹‰é‡‘é¢ -->\r\n      <view class=\"custom-amount-section\">\r\n        <view class=\"section-title\">è‡ªå®šä¹‰é‡‘é¢</view>\r\n        <view class=\"custom-input-wrapper\">\r\n          <text class=\"input-symbol\">Â¥</text>\r\n          <input\r\n            class=\"custom-input\"\r\n            type=\"digit\"\r\n            v-model=\"customAmount\"\r\n            placeholder=\"è¯·è¾“å…¥å……å€¼é‡‘é¢\"\r\n            @input=\"onCustomAmountInput\"\r\n          />\r\n        </view>\r\n        <view class=\"amount-tips\">\r\n          <text>å•ç¬”æœ€ä½å……å€¼ï¼š1å…ƒï¼Œæœ€é«˜ï¼š10000å…ƒ</text>\r\n        </view>\r\n      </view>\r\n\r\n      <!-- æ”¯ä»˜æ–¹å¼ -->\r\n      <view class=\"payment-section\">\r\n        <view class=\"section-title\">æ”¯ä»˜æ–¹å¼</view>\r\n        <view class=\"payment-method list-item\">\r\n          <view class=\"method-left\">\r\n            <view class=\"method-icon alipay\">\r\n              <text class=\"iconfont alipay-icon\">ğŸ”·</text>\r\n            </view>\r\n            <view class=\"method-info\">\r\n              <text class=\"method-name\">æ”¯ä»˜å®æ”¯ä»˜</text>\r\n              <text class=\"method-desc\">æ”¯æŒæ”¯ä»˜å®æ²™ç®±ç¯å¢ƒæµ‹è¯•</text>\r\n            </view>\r\n          </view>\r\n          <view class=\"method-check active\">\r\n            <text class=\"iconfont\">âœ“</text>\r\n          </view>\r\n        </view>\r\n      </view>\r\n\r\n      <!-- å……å€¼è¯´æ˜ -->\r\n      <view class=\"tips-section\">\r\n        <view class=\"tips-title\">å……å€¼è¯´æ˜</view>\r\n        <view class=\"tips-list\">\r\n          <text class=\"tip-item\">â€¢ å……å€¼åä½™é¢å®æ—¶åˆ°è´¦</text>\r\n          <text class=\"tip-item\">â€¢ å½“å‰ä¸ºæ”¯ä»˜å®æ²™ç®±æµ‹è¯•ç¯å¢ƒï¼Œè¯·ä½¿ç”¨æ²™ç®±è´¦å·æ”¯ä»˜</text>\r\n          <text class=\"tip-item\">â€¢ å¦‚æœ‰å……å€¼æœªåˆ°è´¦é—®é¢˜ï¼Œè¯·è”ç³»å®¢æœå¤„ç†</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- åº•éƒ¨å……å€¼æŒ‰é’® -->\r\n    <view class=\"bottom-bar\">\r\n      <view class=\"bar-info\">\r\n        <text class=\"bar-label\">å……å€¼é‡‘é¢ï¼š</text>\r\n        <text class=\"bar-amount\">Â¥{{ finalAmount }}</text>\r\n      </view>\r\n      <button class=\"btn-confirm\" @click=\"handleRecharge\" :disabled=\"!canRecharge\">\r\n        ç¡®è®¤å……å€¼\r\n      </button>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { alipayRecharge } from '@/api/wallet.js'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      presetAmounts: [10, 50, 100, 200, 500, 1000], // é¢„è®¾é‡‘é¢\r\n      selectedAmount: null, // é€‰ä¸­çš„é¢„è®¾é‡‘é¢\r\n      customAmount: '', // è‡ªå®šä¹‰é‡‘é¢\r\n      currentAmount: 0 // å½“å‰å……å€¼é‡‘é¢\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    // æœ€ç»ˆå……å€¼é‡‘é¢\r\n    finalAmount() {\r\n      return Number(this.currentAmount || 0).toFixed(2)\r\n    },\r\n    // æ˜¯å¦å¯ä»¥å……å€¼\r\n    canRecharge() {\r\n      const amount = Number(this.currentAmount)\r\n      return amount >= 1 && amount <= 10000\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    /**\r\n     * é€‰æ‹©é¢„è®¾é‡‘é¢\r\n     */\r\n    selectAmount(amount) {\r\n      this.selectedAmount = amount\r\n      this.customAmount = ''\r\n      this.currentAmount = amount\r\n    },\r\n\r\n    /**\r\n     * è‡ªå®šä¹‰é‡‘é¢è¾“å…¥\r\n     */\r\n    onCustomAmountInput(e) {\r\n      const value = e.detail.value\r\n      this.customAmount = value\r\n\r\n      // é™åˆ¶å°æ•°ç‚¹åä¸¤ä½\r\n      if (value.includes('.')) {\r\n        const parts = value.split('.')\r\n        if (parts[1] && parts[1].length > 2) {\r\n          this.customAmount = parts[0] + '.' + parts[1].substring(0, 2)\r\n        }\r\n      }\r\n\r\n      // æ¸…é™¤é€‰ä¸­çŠ¶æ€\r\n      this.selectedAmount = null\r\n      this.currentAmount = Number(this.customAmount)\r\n    },\r\n\r\n    /**\r\n     * å……å€¼\r\n     */\r\n    async handleRecharge() {\r\n      const amount = Number(this.currentAmount)\r\n\r\n      // éªŒè¯é‡‘é¢\r\n      if (amount < 1) {\r\n        uni.showToast({\r\n          title: 'å……å€¼é‡‘é¢ä¸èƒ½ä½äº1å…ƒ',\r\n          icon: 'none'\r\n        })\r\n        return\r\n      }\r\n\r\n      if (amount > 10000) {\r\n        uni.showToast({\r\n          title: 'å•ç¬”å……å€¼ä¸èƒ½è¶…è¿‡10000å…ƒ',\r\n          icon: 'none'\r\n        })\r\n        return\r\n      }\r\n\r\n      // ç¡®è®¤å……å€¼\r\n      uni.showModal({\r\n        title: 'ç¡®è®¤å……å€¼',\r\n        content: `ç¡®å®šè¦å……å€¼ Â¥${amount.toFixed(2)} å—ï¼Ÿ`,\r\n        success: async (res) => {\r\n          if (res.confirm) {\r\n            await this.doRecharge(amount)\r\n          }\r\n        }\r\n      })\r\n    },\r\n\r\n    /**\r\n     * æ‰§è¡Œå……å€¼\r\n     */\r\n    async doRecharge(amount) {\r\n      try {\r\n        uni.showLoading({ title: 'æ­£åœ¨å‘èµ·æ”¯ä»˜...' })\r\n\r\n        // è°ƒç”¨æ”¯ä»˜å®å……å€¼æ¥å£ï¼Œè·å–æ”¯ä»˜è¡¨å•HTML\r\n        const res = await alipayRecharge({ amount })\r\n\r\n        uni.hideLoading()\r\n\r\n        if (res.code === 200 && res.data) {\r\n          // å°†æ”¯ä»˜è¡¨å•HTMLç¼–ç æˆ–ç›´æ¥å­˜å…¥å…¨å±€ï¼Œè·³è½¬åˆ°æ”¯ä»˜ä¸­é—´é¡µ\r\n          // æ³¨æ„ï¼šæ”¯ä»˜è¡¨å•HTMLå¯èƒ½å¾ˆå¤§ï¼Œé€šè¿‡URLä¼ å‚å¯èƒ½è¶…é•¿ï¼Œå»ºè®®ä½¿ç”¨storage\r\n          uni.setStorageSync('alipay_form', res.data)\r\n          \r\n          uni.navigateTo({\r\n            url: `/pages/wallet/alipay-pay?amount=${amount.toFixed(2)}`\r\n          })\r\n        } else {\r\n          uni.showToast({\r\n            title: res.message || 'å‘èµ·æ”¯ä»˜å¤±è´¥',\r\n            icon: 'none'\r\n          })\r\n        }\r\n      } catch (error) {\r\n        uni.hideLoading()\r\n        console.error('âŒ å……å€¼å¤±è´¥:', error)\r\n        uni.showToast({\r\n          title: 'å‘èµ·æ”¯ä»˜å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•',\r\n          icon: 'none'\r\n        })\r\n      }\r\n    },\r\n\r\n    /**\r\n     * è¿”å›ä¸Šä¸€é¡µ\r\n     */\r\n    goBack() {\r\n      uni.navigateBack()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.recharge-container {\r\n  min-height: 100vh;\r\n  background-color: #f5f5f5;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n/* å¯¼èˆªæ  */\r\n.nav-bar {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  height: 44px;\r\n  padding: 0 15px;\r\n  background-color: #fff;\r\n  border-bottom: 1px solid #eee;\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  z-index: 100;\r\n}\r\n\r\n.nav-back {\r\n  width: 40px;\r\n  height: 40px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 24px;\r\n  color: #333;\r\n  cursor: pointer;\r\n}\r\n\r\n.nav-title {\r\n  font-size: 17px;\r\n  font-weight: 600;\r\n  color: #333;\r\n}\r\n\r\n.nav-placeholder {\r\n  width: 40px;\r\n}\r\n\r\n/* å……å€¼å†…å®¹ */\r\n.recharge-content {\r\n  flex: 1;\r\n  margin-top: 54px;\r\n  margin-bottom: 70px;\r\n  padding: 15px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.amount-section,\r\n.custom-amount-section,\r\n.payment-section,\r\n.tips-section {\r\n  background-color: #fff;\r\n  border-radius: 12px;\r\n  padding: 20px;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.section-title {\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: #333;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n/* é¢„è®¾é‡‘é¢ */\r\n.amount-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(3, 1fr);\r\n  gap: 10px;\r\n}\r\n\r\n.amount-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 20px 10px;\r\n  background-color: #f5f7fa;\r\n  border-radius: 8px;\r\n  border: 2px solid transparent;\r\n  cursor: pointer;\r\n  transition: all 0.3s;\r\n}\r\n\r\n.amount-item.active {\r\n  background-color: #f0f4ff;\r\n  border-color: #667eea;\r\n}\r\n\r\n.amount-value {\r\n  font-size: 22px;\r\n  font-weight: bold;\r\n  color: #333;\r\n  margin-bottom: 4px;\r\n}\r\n\r\n.amount-unit {\r\n  font-size: 12px;\r\n  color: #999;\r\n}\r\n\r\n/* è‡ªå®šä¹‰é‡‘é¢ */\r\n.custom-input-wrapper {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 15px;\r\n  background-color: #f5f7fa;\r\n  border-radius: 8px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.input-symbol {\r\n  font-size: 24px;\r\n  font-weight: bold;\r\n  color: #333;\r\n  margin-right: 10px;\r\n}\r\n\r\n.custom-input {\r\n  flex: 1;\r\n  font-size: 20px;\r\n  font-weight: 600;\r\n  color: #333;\r\n}\r\n\r\n.amount-tips {\r\n  font-size: 12px;\r\n  color: #999;\r\n  text-align: center;\r\n}\r\n\r\n/* æ”¯ä»˜æ–¹å¼ */\r\n.payment-method {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 15px;\r\n  background-color: #f5f7fa;\r\n  border-radius: 8px;\r\n}\r\n\r\n.method-icon {\r\n  width: 40px;\r\n  height: 40px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background-color: #fff;\r\n  border-radius: 8px;\r\n  font-size: 20px;\r\n  margin-right: 12px;\r\n}\r\n\r\n.method-info {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.method-name {\r\n  font-size: 15px;\r\n  font-weight: 600;\r\n  color: #333;\r\n  margin-bottom: 4px;\r\n}\r\n\r\n.method-desc {\r\n  font-size: 12px;\r\n  color: #999;\r\n}\r\n\r\n.method-check {\r\n  width: 24px;\r\n  height: 24px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  border-radius: 50%;\r\n  color: #fff;\r\n  font-size: 14px;\r\n  font-weight: bold;\r\n}\r\n\r\n/* å……å€¼è¯´æ˜ */\r\n.tips-title {\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  color: #666;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.tips-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.tip-item {\r\n  font-size: 13px;\r\n  color: #999;\r\n  line-height: 1.8;\r\n}\r\n\r\n/* åº•éƒ¨æŒ‰é’® */\r\n.bottom-bar {\r\n  position: fixed;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 10px 15px;\r\n  background-color: #fff;\r\n  border-top: 1px solid #eee;\r\n  box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.bar-info {\r\n  flex: 1;\r\n}\r\n\r\n.bar-label {\r\n  font-size: 13px;\r\n  color: #666;\r\n}\r\n\r\n.bar-amount {\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  color: #ff4d4f;\r\n}\r\n\r\n.btn-confirm {\r\n  width: 120px;\r\n  height: 44px;\r\n  line-height: 44px;\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  color: #fff;\r\n  font-size: 15px;\r\n  font-weight: 600;\r\n  border-radius: 22px;\r\n  border: none;\r\n}\r\n\r\n.btn-confirm[disabled] {\r\n  opacity: 0.5;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'E:/Delivery Service Platform/uniapp/pages/wallet/recharge.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","alipayRecharge"],"mappings":";;;AA6FA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,eAAe,CAAC,IAAI,IAAI,KAAK,KAAK,KAAK,GAAI;AAAA;AAAA,MAC3C,gBAAgB;AAAA;AAAA,MAChB,cAAc;AAAA;AAAA,MACd,eAAe;AAAA;AAAA,IACjB;AAAA,EACD;AAAA,EAED,UAAU;AAAA;AAAA,IAER,cAAc;AACZ,aAAO,OAAO,KAAK,iBAAiB,CAAC,EAAE,QAAQ,CAAC;AAAA,IACjD;AAAA;AAAA,IAED,cAAc;AACZ,YAAM,SAAS,OAAO,KAAK,aAAa;AACxC,aAAO,UAAU,KAAK,UAAU;AAAA,IAClC;AAAA,EACD;AAAA,EAED,SAAS;AAAA;AAAA;AAAA;AAAA,IAIP,aAAa,QAAQ;AACnB,WAAK,iBAAiB;AACtB,WAAK,eAAe;AACpB,WAAK,gBAAgB;AAAA,IACtB;AAAA;AAAA;AAAA;AAAA,IAKD,oBAAoB,GAAG;AACrB,YAAM,QAAQ,EAAE,OAAO;AACvB,WAAK,eAAe;AAGpB,UAAI,MAAM,SAAS,GAAG,GAAG;AACvB,cAAM,QAAQ,MAAM,MAAM,GAAG;AAC7B,YAAI,MAAM,CAAC,KAAK,MAAM,CAAC,EAAE,SAAS,GAAG;AACnC,eAAK,eAAe,MAAM,CAAC,IAAI,MAAM,MAAM,CAAC,EAAE,UAAU,GAAG,CAAC;AAAA,QAC9D;AAAA,MACF;AAGA,WAAK,iBAAiB;AACtB,WAAK,gBAAgB,OAAO,KAAK,YAAY;AAAA,IAC9C;AAAA;AAAA;AAAA;AAAA,IAKD,MAAM,iBAAiB;AACrB,YAAM,SAAS,OAAO,KAAK,aAAa;AAGxC,UAAI,SAAS,GAAG;AACdA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,SACP;AACD;AAAA,MACF;AAEA,UAAI,SAAS,KAAO;AAClBA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,SACP;AACD;AAAA,MACF;AAGAA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,SAAS,UAAU,OAAO,QAAQ,CAAC,CAAC;AAAA,QACpC,SAAS,OAAO,QAAQ;AACtB,cAAI,IAAI,SAAS;AACf,kBAAM,KAAK,WAAW,MAAM;AAAA,UAC9B;AAAA,QACF;AAAA,OACD;AAAA,IACF;AAAA;AAAA;AAAA;AAAA,IAKD,MAAM,WAAW,QAAQ;AACvB,UAAI;AACFA,sBAAAA,MAAI,YAAY,EAAE,OAAO,aAAa;AAGtC,cAAM,MAAM,MAAMC,0BAAe,EAAE,QAAQ;AAE3CD,sBAAAA,MAAI,YAAY;AAEhB,YAAI,IAAI,SAAS,OAAO,IAAI,MAAM;AAGhCA,wBAAAA,MAAI,eAAe,eAAe,IAAI,IAAI;AAE1CA,wBAAAA,MAAI,WAAW;AAAA,YACb,KAAK,mCAAmC,OAAO,QAAQ,CAAC,CAAC;AAAA,WAC1D;AAAA,eACI;AACLA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO,IAAI,WAAW;AAAA,YACtB,MAAM;AAAA,WACP;AAAA,QACH;AAAA,MACA,SAAO,OAAO;AACdA,sBAAAA,MAAI,YAAY;AAChBA,sBAAAA,MAAA,MAAA,SAAA,oCAAc,WAAW,KAAK;AAC9BA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,SACP;AAAA,MACH;AAAA,IACD;AAAA;AAAA;AAAA;AAAA,IAKD,SAAS;AACPA,oBAAAA,MAAI,aAAa;AAAA,IACnB;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;AC9NA,GAAG,WAAW,eAAe;"}