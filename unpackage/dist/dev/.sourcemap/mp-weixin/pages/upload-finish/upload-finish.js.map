{"version":3,"file":"upload-finish.js","sources":["pages/upload-finish/upload-finish.vue","D:/Users/windows/Downloads/HBuilderX.4.85.2025110510/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdXBsb2FkLWZpbmlzaC91cGxvYWQtZmluaXNoLnZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"upload-container\">\r\n    <!-- È°∂ÈÉ®Ê†áÈ¢òÊ†è -->\r\n    <view class=\"header\">\r\n      <view class=\"header-back\" @tap=\"goBack\">\r\n        <text class=\"back-icon\">‚Üê</text>\r\n      </view>\r\n      <text class=\"header-title\">‰∏ä‰º†ÂÆåÊàêÂá≠ËØÅ</text>\r\n    </view>\r\n\r\n    <!-- ËÆ¢Âçï‰ø°ÊÅØ -->\r\n    <view class=\"order-info\" v-if=\"orderInfo\">\r\n      <view class=\"info-title\">ËÆ¢Âçï‰ø°ÊÅØ</view>\r\n      <view class=\"info-item\">\r\n        <text class=\"label\">ÈÄÅË¥ßÂú∞ÂùÄÔºö</text>\r\n        <text class=\"value\">{{ orderInfo.deliveryAddr }}</text>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- ‰∏ä‰º†Âå∫Âüü -->\r\n    <view class=\"upload-section\">\r\n      <view class=\"section-title\">‰∏ä‰º†ÂÆåÊàêÂõæÁâá</view>\r\n      <view class=\"upload-area\" @tap=\"chooseImage\">\r\n        <view class=\"upload-content\" v-if=\"!imageUrl\">\r\n          <text class=\"upload-icon\">üì∑</text>\r\n          <text class=\"upload-text\">ÁÇπÂáª‰∏ä‰º†ÂõæÁâá</text>\r\n          <text class=\"upload-tip\">ËØ∑‰∏ä‰º†ÈÖçÈÄÅÂÆåÊàêÂá≠ËØÅÁÖßÁâá</text>\r\n        </view>\r\n        <image v-else class=\"preview-image\" :src=\"imageUrl\" mode=\"aspectFill\"></image>\r\n      </view>\r\n      <view class=\"action-btns\" v-if=\"imageUrl\">\r\n        <button class=\"btn reupload-btn\" @tap.stop=\"chooseImage\">ÈáçÊñ∞‰∏ä‰º†</button>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- Êèê‰∫§ÊåâÈíÆ -->\r\n    <view class=\"submit-section\">\r\n      <button class=\"submit-btn\" @tap=\"handleSubmit\" :disabled=\"!imageUrl\">\r\n        Á°ÆËÆ§ÂÆåÊàêÈÖçÈÄÅ\r\n      </button>\r\n    </view>\r\n\r\n    <!-- ÊèêÁ§∫‰ø°ÊÅØ -->\r\n    <view class=\"tips-section\">\r\n      <view class=\"tips-title\">Ê∏©È¶®ÊèêÁ§∫</view>\r\n      <view class=\"tips-item\">‚Ä¢ ËØ∑Á°Æ‰øùÂõæÁâáÊ∏ÖÊô∞ÂèØËßÅ</view>\r\n      <view class=\"tips-item\">‚Ä¢ Âª∫ËÆÆÊãçÊëÑÈÖçÈÄÅÁâ©ÂìÅÈÄÅËææÂú∫ÊôØ</view>\r\n      <view class=\"tips-item\">‚Ä¢ ‰∏ä‰º†ÂêéÂç≥ÂèØÂÆåÊàêÈÖçÈÄÅ</view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { finishOrder } from '@/api/rider.js';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      orderId: null,\r\n      orderInfo: null,\r\n      imageUrl: ''\r\n    };\r\n  },\r\n\r\n  onLoad(options) {\r\n    if (options.orderId) {\r\n      this.orderId = options.orderId;\r\n    }\r\n    if (options.orderInfo) {\r\n      try {\r\n        this.orderInfo = JSON.parse(decodeURIComponent(options.orderInfo));\r\n      } catch (error) {\r\n        console.error('Ëß£ÊûêËÆ¢Âçï‰ø°ÊÅØÂ§±Ë¥•:', error);\r\n      }\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    // ËøîÂõû‰∏ä‰∏ÄÈ°µ\r\n    goBack() {\r\n      uni.navigateBack();\r\n    },\r\n\r\n    // ÈÄâÊã©ÂõæÁâá\r\n    chooseImage() {\r\n      uni.chooseImage({\r\n        count: 1,\r\n        sizeType: ['compressed'],\r\n        sourceType: ['album', 'camera'],\r\n        success: (res) => {\r\n          this.imageUrl = res.tempFilePaths[0];\r\n        },\r\n        fail: (err) => {\r\n          console.error('ÈÄâÊã©ÂõæÁâáÂ§±Ë¥•:', err);\r\n        }\r\n      });\r\n    },\r\n\r\n    // Êèê‰∫§ÂÆåÊàêÈÖçÈÄÅ\r\n    async handleSubmit() {\r\n      if (!this.imageUrl) {\r\n        uni.showToast({\r\n          title: 'ËØ∑ÂÖà‰∏ä‰º†ÂÆåÊàêÂá≠ËØÅÂõæÁâá',\r\n          icon: 'none',\r\n          duration: 2000\r\n        });\r\n        return;\r\n      }\r\n\r\n      if (!this.orderId) {\r\n        uni.showToast({\r\n          title: 'ËÆ¢Âçï‰ø°ÊÅØÂºÇÂ∏∏',\r\n          icon: 'none',\r\n          duration: 2000\r\n        });\r\n        return;\r\n      }\r\n\r\n      try {\r\n        uni.showLoading({ title: 'Êèê‰∫§‰∏≠...', mask: true });\r\n\r\n        // TODO: ËøôÈáåÂ∫îËØ•ÂÖà‰∏ä‰º†ÂõæÁâáÂà∞ÊúçÂä°Âô®ÔºåËé∑ÂèñÂõæÁâáURL\r\n        // ÊöÇÊó∂‰ΩøÁî®Êú¨Âú∞Ë∑ØÂæÑ\r\n        const finishImg = this.imageUrl;\r\n\r\n        console.log('Êèê‰∫§ÂÆåÊàêÈÖçÈÄÅ:', {\r\n          orderId: this.orderId,\r\n          finishImg: finishImg,\r\n          orderIdType: typeof this.orderId\r\n        });\r\n\r\n        await finishOrder({\r\n          orderId: Number(this.orderId),\r\n          finishImg: finishImg\r\n        });\r\n\r\n        uni.hideLoading();\r\n\r\n        uni.showToast({\r\n          title: 'ÈÖçÈÄÅÂÆåÊàê',\r\n          icon: 'success',\r\n          duration: 2000\r\n        });\r\n\r\n        // Âª∂ËøüËøîÂõûÔºåËÆ©Áî®Êà∑ÁúãÂà∞ÊàêÂäüÊèêÁ§∫\r\n        setTimeout(() => {\r\n          uni.navigateBack();\r\n        }, 2000);\r\n\r\n      } catch (error) {\r\n        uni.hideLoading();\r\n        console.error('ÂÆåÊàêÈÖçÈÄÅÂ§±Ë¥•:', error);\r\n        uni.showToast({\r\n          title: error.message || 'Êèê‰∫§Â§±Ë¥•ÔºåËØ∑ÈáçËØï',\r\n          icon: 'none',\r\n          duration: 2000\r\n        });\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.upload-container {\r\n  min-height: 100vh;\r\n  background-color: #f5f5f5;\r\n  padding-bottom: 40rpx;\r\n}\r\n\r\n/* È°∂ÈÉ®Ê†áÈ¢òÊ†è */\r\n.header {\r\n  display: flex;\r\n  align-items: center;\r\n  background: #fff;\r\n  padding: 30rpx 20rpx;\r\n  border-bottom: 2rpx solid #f5f5f5;\r\n}\r\n\r\n.header-back {\r\n  width: 60rpx;\r\n  height: 60rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.back-icon {\r\n  font-size: 40rpx;\r\n  color: #333;\r\n  font-weight: bold;\r\n}\r\n\r\n.header-title {\r\n  flex: 1;\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n  text-align: center;\r\n  margin-right: 60rpx;\r\n}\r\n\r\n/* ËÆ¢Âçï‰ø°ÊÅØ */\r\n.order-info {\r\n  margin: 20rpx;\r\n  background: #fff;\r\n  border-radius: 16rpx;\r\n  padding: 30rpx;\r\n}\r\n\r\n.info-title {\r\n  font-size: 28rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.info-item {\r\n  display: flex;\r\n  font-size: 26rpx;\r\n  line-height: 40rpx;\r\n}\r\n\r\n.info-item .label {\r\n  color: #666;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.info-item .value {\r\n  color: #333;\r\n  flex: 1;\r\n}\r\n\r\n/* ‰∏ä‰º†Âå∫Âüü */\r\n.upload-section {\r\n  margin: 20rpx;\r\n  background: #fff;\r\n  border-radius: 16rpx;\r\n  padding: 30rpx;\r\n}\r\n\r\n.section-title {\r\n  font-size: 28rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.upload-area {\r\n  width: 100%;\r\n  height: 400rpx;\r\n  border: 2rpx dashed #ddd;\r\n  border-radius: 12rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: #fafafa;\r\n}\r\n\r\n.upload-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\n.upload-icon {\r\n  font-size: 100rpx;\r\n  margin-bottom: 20rpx;\r\n  opacity: 0.5;\r\n}\r\n\r\n.upload-text {\r\n  font-size: 28rpx;\r\n  color: #333;\r\n  margin-bottom: 12rpx;\r\n}\r\n\r\n.upload-tip {\r\n  font-size: 24rpx;\r\n  color: #999;\r\n}\r\n\r\n.preview-image {\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 12rpx;\r\n}\r\n\r\n.action-btns {\r\n  display: flex;\r\n  gap: 20rpx;\r\n  margin-top: 20rpx;\r\n}\r\n\r\n.btn {\r\n  flex: 1;\r\n  height: 80rpx;\r\n  line-height: 80rpx;\r\n  border-radius: 40rpx;\r\n  font-size: 28rpx;\r\n  border: none;\r\n}\r\n\r\n.btn::after {\r\n  border: none;\r\n}\r\n\r\n.reupload-btn {\r\n  background: #f5f5f5;\r\n  color: #333;\r\n}\r\n\r\n/* Êèê‰∫§ÊåâÈíÆ */\r\n.submit-section {\r\n  padding: 20rpx;\r\n}\r\n\r\n.submit-btn {\r\n  width: 100%;\r\n  height: 88rpx;\r\n  line-height: 88rpx;\r\n  background: #07c160;\r\n  color: #fff;\r\n  border-radius: 44rpx;\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n  border: none;\r\n}\r\n\r\n.submit-btn::after {\r\n  border: none;\r\n}\r\n\r\n.submit-btn[disabled] {\r\n  background: #ccc;\r\n}\r\n\r\n/* ÊèêÁ§∫‰ø°ÊÅØ */\r\n.tips-section {\r\n  margin: 20rpx;\r\n  background: #fff8e1;\r\n  border-radius: 12rpx;\r\n  padding: 24rpx;\r\n}\r\n\r\n.tips-title {\r\n  font-size: 26rpx;\r\n  font-weight: bold;\r\n  color: #ff9800;\r\n  margin-bottom: 16rpx;\r\n}\r\n\r\n.tips-item {\r\n  font-size: 24rpx;\r\n  color: #666;\r\n  line-height: 36rpx;\r\n  margin-bottom: 8rpx;\r\n}\r\n\r\n.tips-item:last-child {\r\n  margin-bottom: 0;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'E:/Delivery Service Platform/uniapp/pages/upload-finish/upload-finish.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","finishOrder"],"mappings":";;;AAuDA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,SAAS;AAAA,MACT,WAAW;AAAA,MACX,UAAU;AAAA;EAEb;AAAA,EAED,OAAO,SAAS;AACd,QAAI,QAAQ,SAAS;AACnB,WAAK,UAAU,QAAQ;AAAA,IACzB;AACA,QAAI,QAAQ,WAAW;AACrB,UAAI;AACF,aAAK,YAAY,KAAK,MAAM,mBAAmB,QAAQ,SAAS,CAAC;AAAA,MACjE,SAAO,OAAO;AACdA,sBAAA,MAAA,MAAA,SAAA,+CAAc,aAAa,KAAK;AAAA,MAClC;AAAA,IACF;AAAA,EACD;AAAA,EAED,SAAS;AAAA;AAAA,IAEP,SAAS;AACPA,oBAAG,MAAC,aAAY;AAAA,IACjB;AAAA;AAAA,IAGD,cAAc;AACZA,oBAAAA,MAAI,YAAY;AAAA,QACd,OAAO;AAAA,QACP,UAAU,CAAC,YAAY;AAAA,QACvB,YAAY,CAAC,SAAS,QAAQ;AAAA,QAC9B,SAAS,CAAC,QAAQ;AAChB,eAAK,WAAW,IAAI,cAAc,CAAC;AAAA,QACpC;AAAA,QACD,MAAM,CAAC,QAAQ;AACbA,wBAAc,MAAA,MAAA,SAAA,+CAAA,WAAW,GAAG;AAAA,QAC9B;AAAA,MACF,CAAC;AAAA,IACF;AAAA;AAAA,IAGD,MAAM,eAAe;AACnB,UAAI,CAAC,KAAK,UAAU;AAClBA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,QACZ,CAAC;AACD;AAAA,MACF;AAEA,UAAI,CAAC,KAAK,SAAS;AACjBA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,QACZ,CAAC;AACD;AAAA,MACF;AAEA,UAAI;AACFA,sBAAG,MAAC,YAAY,EAAE,OAAO,UAAU,MAAM,KAAG,CAAG;AAI/C,cAAM,YAAY,KAAK;AAEvBA,sBAAAA,mEAAY,WAAW;AAAA,UACrB,SAAS,KAAK;AAAA,UACd;AAAA,UACA,aAAa,OAAO,KAAK;AAAA,QAC3B,CAAC;AAED,cAAMC,sBAAY;AAAA,UAChB,SAAS,OAAO,KAAK,OAAO;AAAA,UAC5B;AAAA,QACF,CAAC;AAEDD,sBAAG,MAAC,YAAW;AAEfA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,QACZ,CAAC;AAGD,mBAAW,MAAM;AACfA,wBAAG,MAAC,aAAY;AAAA,QACjB,GAAE,GAAI;AAAA,MAEP,SAAO,OAAO;AACdA,sBAAG,MAAC,YAAW;AACfA,sBAAc,MAAA,MAAA,SAAA,gDAAA,WAAW,KAAK;AAC9BA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO,MAAM,WAAW;AAAA,UACxB,MAAM;AAAA,UACN,UAAU;AAAA,QACZ,CAAC;AAAA,MACH;AAAA,IACF;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;AC/JA,GAAG,WAAW,eAAe;"}