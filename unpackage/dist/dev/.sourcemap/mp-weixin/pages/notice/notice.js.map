{"version":3,"file":"notice.js","sources":["pages/notice/notice.vue","D:/Users/windows/Downloads/HBuilderX.4.85.2025110510/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbm90aWNlL25vdGljZS52dWU"],"sourcesContent":["<template>\r\n  <view class=\"notice-container\">\r\n    <!-- ÂÖ¨ÂëäÁ±ªÂûãÁ≠õÈÄâ -->\r\n    <view class=\"type-tabs\">\r\n      <view\r\n        class=\"tab-item\"\r\n        :class=\"{ active: currentType === null }\"\r\n        @tap=\"switchType(null)\"\r\n      >\r\n        ÂÖ®ÈÉ®\r\n      </view>\r\n      <view\r\n        class=\"tab-item\"\r\n        :class=\"{ active: currentType === 1 }\"\r\n        @tap=\"switchType(1)\"\r\n      >\r\n        Á≥ªÁªüÂÖ¨Âëä\r\n      </view>\r\n      <view\r\n        class=\"tab-item\"\r\n        :class=\"{ active: currentType === 2 }\"\r\n        @tap=\"switchType(2)\"\r\n      >\r\n        Ê¥ªÂä®ÈÄöÁü•\r\n      </view>\r\n    </view>\r\n\r\n    <!-- ÂÖ¨ÂëäÂàóË°® -->\r\n    <view class=\"notice-list\" v-if=\"noticeList.length > 0\">\r\n      <view\r\n        class=\"notice-item\"\r\n        v-for=\"notice in noticeList\"\r\n        :key=\"notice.id\"\r\n        @tap=\"viewNoticeDetail(notice)\"\r\n      >\r\n        <view class=\"notice-header\">\r\n          <view class=\"notice-title-row\">\r\n            <text class=\"notice-tag\" v-if=\"notice.type === 1\">ÂÖ¨Âëä</text>\r\n            <text class=\"notice-tag activity\" v-else-if=\"notice.type === 2\">Ê¥ªÂä®</text>\r\n            <text class=\"notice-title\">{{ notice.title }}</text>\r\n          </view>\r\n          <text class=\"notice-time\">{{ formatTime(notice.createTime) }}</text>\r\n        </view>\r\n\r\n        <view class=\"notice-content\" v-if=\"notice.imgUrl\">\r\n          <image :src=\"notice.imgUrl\" class=\"notice-image\" mode=\"aspectFill\"></image>\r\n        </view>\r\n\r\n        <view class=\"notice-desc\" v-if=\"notice.content\">\r\n          <text class=\"desc-text\">{{ getContentPreview(notice.content) }}</text>\r\n          <text class=\"view-more\">Êü•ÁúãËØ¶ÊÉÖ ‚Ä∫</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- Á©∫Áä∂ÊÄÅ -->\r\n    <view class=\"empty-state\" v-else-if=\"!loading\">\r\n      <text class=\"empty-icon\">üì¢</text>\r\n      <text class=\"empty-text\">ÊöÇÊó†ÂÖ¨Âëä</text>\r\n    </view>\r\n\r\n    <!-- Âä†ËΩΩ‰∏≠ -->\r\n    <view class=\"loading-state\" v-if=\"loading\">\r\n      <text class=\"loading-text\">Âä†ËΩΩ‰∏≠...</text>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { getNoticeList } from '../../api/notice.js'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      currentType: null, // ÂΩìÂâçÈÄâ‰∏≠ÁöÑÁ±ªÂûã null=ÂÖ®ÈÉ® 1=ÂÖ¨Âëä 2=Ê¥ªÂä®\r\n      noticeList: [],\r\n      loading: false\r\n    }\r\n  },\r\n\r\n  onLoad() {\r\n    this.loadNotices()\r\n  },\r\n\r\n  methods: {\r\n    // Âä†ËΩΩÂÖ¨ÂëäÂàóË°®\r\n    async loadNotices() {\r\n      this.loading = true\r\n      try {\r\n        console.log('=== ÂºÄÂßãÂä†ËΩΩÂÖ¨ÂëäÂàóË°® ===')\r\n        console.log('ÂΩìÂâçÂÖ¨ÂëäÁ±ªÂûã:', this.currentType)\r\n\r\n        const params = {}\r\n        if (this.currentType !== null) {\r\n          params.type = this.currentType\r\n        }\r\n\r\n        console.log('ËØ∑Ê±ÇÂèÇÊï∞:', params)\r\n\r\n        const res = await getNoticeList(params)\r\n\r\n        console.log('ÂÖ¨ÂëäAPIÂìçÂ∫î:', res)\r\n        console.log('ÂìçÂ∫îÁ†Å:', res.code)\r\n        console.log('ÂìçÂ∫îÊï∞ÊçÆ:', res.data)\r\n        console.log('Êï∞ÊçÆÁ±ªÂûã:', typeof res.data)\r\n        console.log('ÊòØÂê¶‰∏∫Êï∞ÁªÑ:', Array.isArray(res.data))\r\n\r\n        if (res.code === 200 && res.data) {\r\n          // Á°Æ‰øùdataÊòØÊï∞ÁªÑ\r\n          const noticeData = Array.isArray(res.data) ? res.data : []\r\n\r\n          console.log('Â§ÑÁêÜÂêéÁöÑÂÖ¨ÂëäÊï∞ÊçÆ:', noticeData)\r\n          console.log('ÂÖ¨ÂëäÊï∞Èáè:', noticeData.length)\r\n\r\n          // Â§ÑÁêÜÂÖ¨ÂëäÊï∞ÊçÆÔºåÁ°Æ‰øùÂ≠óÊÆµÂÆåÊï¥ÊÄß\r\n          this.noticeList = noticeData.map(item => {\r\n            return {\r\n              id: item.id,\r\n              title: item.title || 'ÂÖ¨ÂëäÊ†áÈ¢ò',\r\n              content: item.content,\r\n              imgUrl: item.imgUrl || item.imageUrl || '',\r\n              type: item.type,\r\n              status: item.status,\r\n              sort: item.sort || 0,\r\n              createTime: item.createTime\r\n            }\r\n          })\r\n\r\n          console.log('ÊúÄÁªàÂÖ¨ÂëäÂàóË°®:', this.noticeList)\r\n        } else {\r\n          console.log('ÂìçÂ∫îÁ†Å‰∏çÊòØ200ÊàñÊ≤°ÊúâÊï∞ÊçÆ')\r\n          this.noticeList = []\r\n        }\r\n      } catch (error) {\r\n        console.error('=== Âä†ËΩΩÂÖ¨ÂëäÂ§±Ë¥• ===')\r\n        console.error('ÈîôËØØ‰ø°ÊÅØ:', error)\r\n        console.error('ÈîôËØØËØ¶ÊÉÖ:', JSON.stringify(error))\r\n\r\n        uni.showToast({\r\n          title: 'Âä†ËΩΩÂ§±Ë¥•',\r\n          icon: 'none'\r\n        })\r\n\r\n        this.noticeList = []\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n\r\n    // ÂàáÊç¢ÂÖ¨ÂëäÁ±ªÂûã\r\n    switchType(type) {\r\n      if (this.currentType === type) return\r\n      this.currentType = type\r\n      this.loadNotices()\r\n    },\r\n\r\n    // Êü•ÁúãÂÖ¨ÂëäËØ¶ÊÉÖ\r\n    viewNoticeDetail(notice) {\r\n      // ÊòæÁ§∫ÂÖ¨ÂëäËØ¶ÊÉÖÂºπÁ™ó\r\n      uni.showModal({\r\n        title: notice.title,\r\n        content: notice.content || 'ÊöÇÊó†ËØ¶ÁªÜÂÜÖÂÆπ',\r\n        showCancel: false,\r\n        confirmText: 'ÊàëÁü•ÈÅì‰∫Ü'\r\n      })\r\n    },\r\n\r\n    // Ê†ºÂºèÂåñÊó∂Èó¥\r\n    formatTime(time) {\r\n      if (!time) return ''\r\n      const date = new Date(time)\r\n      const now = new Date()\r\n      const diff = now - date\r\n\r\n      // Â∞è‰∫é1Â∞èÊó∂\r\n      if (diff < 3600000) {\r\n        return Math.floor(diff / 60000) + 'ÂàÜÈíüÂâç'\r\n      }\r\n\r\n      // Â∞è‰∫é24Â∞èÊó∂\r\n      if (diff < 86400000) {\r\n        return Math.floor(diff / 3600000) + 'Â∞èÊó∂Ââç'\r\n      }\r\n\r\n      // Â∞è‰∫é7Â§©\r\n      if (diff < 604800000) {\r\n        return Math.floor(diff / 86400000) + 'Â§©Ââç'\r\n      }\r\n\r\n      // ÂÖ∂‰ªñÊòæÁ§∫ÂÆåÊï¥Êó•Êúü\r\n      const year = date.getFullYear()\r\n      const month = String(date.getMonth() + 1).padStart(2, '0')\r\n      const day = String(date.getDate()).padStart(2, '0')\r\n      return `${year}-${month}-${day}`\r\n    },\r\n\r\n    // Ëé∑ÂèñÂÜÖÂÆπÈ¢ÑËßà\r\n    getContentPreview(content) {\r\n      if (!content) return ''\r\n      if (content.length <= 50) return content\r\n      return content.substring(0, 50) + '...'\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.notice-container {\r\n  min-height: 100vh;\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n/* Á±ªÂûãÁ≠õÈÄâ */\r\n.type-tabs {\r\n  display: flex;\r\n  background: #fff;\r\n  padding: 20rpx;\r\n  border-bottom: 2rpx solid #f0f0f0;\r\n}\r\n\r\n.tab-item {\r\n  flex: 1;\r\n  text-align: center;\r\n  padding: 16rpx 0;\r\n  font-size: 28rpx;\r\n  color: #666;\r\n  position: relative;\r\n}\r\n\r\n.tab-item.active {\r\n  color: #07c160;\r\n  font-weight: bold;\r\n}\r\n\r\n.tab-item.active::after {\r\n  content: '';\r\n  position: absolute;\r\n  bottom: -2rpx;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  width: 60rpx;\r\n  height: 4rpx;\r\n  background: #07c160;\r\n  border-radius: 2rpx;\r\n}\r\n\r\n/* ÂÖ¨ÂëäÂàóË°® */\r\n.notice-list {\r\n  padding: 20rpx;\r\n}\r\n\r\n.notice-item {\r\n  background: #fff;\r\n  border-radius: 16rpx;\r\n  padding: 30rpx;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.notice-header {\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.notice-title-row {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 16rpx;\r\n}\r\n\r\n.notice-tag {\r\n  background: #e6f7ff;\r\n  color: #1890ff;\r\n  font-size: 20rpx;\r\n  padding: 6rpx 12rpx;\r\n  border-radius: 6rpx;\r\n  margin-right: 16rpx;\r\n}\r\n\r\n.notice-tag.activity {\r\n  background: #fff7e6;\r\n  color: #fa8c16;\r\n}\r\n\r\n.notice-title {\r\n  flex: 1;\r\n  font-size: 30rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n\r\n.notice-time {\r\n  font-size: 24rpx;\r\n  color: #999;\r\n}\r\n\r\n.notice-content {\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.notice-image {\r\n  width: 100%;\r\n  height: 300rpx;\r\n  border-radius: 12rpx;\r\n}\r\n\r\n.notice-desc {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.desc-text {\r\n  font-size: 26rpx;\r\n  color: #666;\r\n  line-height: 1.6;\r\n  margin-bottom: 16rpx;\r\n}\r\n\r\n.view-more {\r\n  font-size: 26rpx;\r\n  color: #07c160;\r\n}\r\n\r\n/* Á©∫Áä∂ÊÄÅ */\r\n.empty-state {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  padding: 200rpx 0;\r\n}\r\n\r\n.empty-icon {\r\n  font-size: 120rpx;\r\n  margin-bottom: 20rpx;\r\n  opacity: 0.5;\r\n}\r\n\r\n.empty-text {\r\n  font-size: 28rpx;\r\n  color: #999;\r\n}\r\n\r\n/* Âä†ËΩΩ‰∏≠ */\r\n.loading-state {\r\n  display: flex;\r\n  justify-content: center;\r\n  padding: 100rpx 0;\r\n}\r\n\r\n.loading-text {\r\n  font-size: 28rpx;\r\n  color: #999;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'E:/Delivery Service Platform/uniapp/pages/notice/notice.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","getNoticeList"],"mappings":"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"}