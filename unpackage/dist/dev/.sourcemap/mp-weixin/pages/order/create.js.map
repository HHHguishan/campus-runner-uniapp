{"version":3,"file":"create.js","sources":["pages/order/create.vue","D:/Users/windows/Downloads/HBuilderX.4.85.2025110510/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvb3JkZXIvY3JlYXRlLnZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"order-create-container\">\r\n    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->\r\n    <view class=\"nav-bar\">\r\n      <view class=\"nav-back\" @click=\"goBack\">\r\n        <text class=\"iconfont\">â€¹</text>\r\n      </view>\r\n      <view class=\"nav-title\">å‘å¸ƒè®¢å•</view>\r\n      <view class=\"nav-placeholder\"></view>\r\n    </view>\r\n\r\n    <!-- è¡¨å•å†…å®¹ -->\r\n    <scroll-view class=\"form-content\" scroll-y>\r\n      <!-- æœåŠ¡ç±»å‹ -->\r\n      <view class=\"form-section\">\r\n        <view class=\"section-title required\">æœåŠ¡ç±»å‹</view>\r\n        <view class=\"service-type-grid\">\r\n          <view\r\n            class=\"service-type-item\"\r\n            :class=\"{ active: formData.type === item.value }\"\r\n            v-for=\"item in serviceTypes\"\r\n            :key=\"item.value\"\r\n            @click=\"selectServiceType(item.value)\"\r\n          >\r\n            <text class=\"service-icon\">{{ item.icon }}</text>\r\n            <text class=\"service-name\">{{ item.label }}</text>\r\n          </view>\r\n        </view>\r\n      </view>\r\n\r\n      <!-- ç‰©å“ä¿¡æ¯ -->\r\n      <view class=\"form-section\">\r\n        <view class=\"section-title required\">ç‰©å“ä¿¡æ¯</view>\r\n        <view class=\"form-input-wrapper\">\r\n          <textarea\r\n            class=\"form-textarea\"\r\n            v-model=\"formData.goodsDesc\"\r\n            placeholder=\"è¯·æè¿°ç‰©å“ä¿¡æ¯ï¼Œå¦‚ï¼šå¸®ä¹°ä¸€æ¯å¥¶èŒ¶ï¼Œå°‘å†°å°‘ç³–\"\r\n            maxlength=\"200\"\r\n            :show-confirm-bar=\"false\"\r\n          />\r\n          <view class=\"char-count\">{{ formData.goodsDesc.length }}/200</view>\r\n        </view>\r\n      </view>\r\n\r\n      <!-- å–ä»¶åœ°å€ -->\r\n      <view class=\"form-section\">\r\n        <view class=\"section-title required\">å–ä»¶åœ°å€</view>\r\n        <view class=\"address-selector\" @click=\"selectPickupAddress\">\r\n          <view class=\"address-content\" v-if=\"formData.pickupAddress\">\r\n            <view class=\"address-header\">\r\n              <text class=\"contact-name\">{{ formData.pickupAddress.addressName }}</text>\r\n              <text class=\"contact-phone\">{{ formData.pickupAddress.contactPhone }}</text>\r\n            </view>\r\n            <view class=\"contact-info\" v-if=\"formData.pickupAddress.contactName\">\r\n              <text class=\"contact-person\">è”ç³»äºº: {{ formData.pickupAddress.contactName }}</text>\r\n            </view>\r\n            <view class=\"address-detail\">\r\n              {{ formData.pickupAddress.detail }}\r\n            </view>\r\n          </view>\r\n          <view class=\"address-placeholder\" v-else>\r\n            <text class=\"placeholder-text\">è¯·é€‰æ‹©å–ä»¶åœ°å€</text>\r\n            <text class=\"placeholder-arrow\">â€º</text>\r\n          </view>\r\n        </view>\r\n      </view>\r\n\r\n      <!-- é€è¾¾åœ°å€ -->\r\n      <view class=\"form-section\">\r\n        <view class=\"section-title required\">é€è¾¾åœ°å€</view>\r\n        <view class=\"address-selector\" @click=\"selectDeliveryAddress\">\r\n          <view class=\"address-content\" v-if=\"formData.deliveryAddress\">\r\n            <view class=\"address-header\">\r\n              <text class=\"contact-name\">{{ formData.deliveryAddress.addressName }}</text>\r\n              <text class=\"contact-phone\">{{ formData.deliveryAddress.contactPhone }}</text>\r\n            </view>\r\n            <view class=\"contact-info\" v-if=\"formData.deliveryAddress.contactName\">\r\n              <text class=\"contact-person\">è”ç³»äºº: {{ formData.deliveryAddress.contactName }}</text>\r\n            </view>\r\n            <view class=\"address-detail\">\r\n              {{ formData.deliveryAddress.detail }}\r\n            </view>\r\n          </view>\r\n          <view class=\"address-placeholder\" v-else>\r\n            <text class=\"placeholder-text\">è¯·é€‰æ‹©é€è¾¾åœ°å€</text>\r\n            <text class=\"placeholder-arrow\">â€º</text>\r\n          </view>\r\n        </view>\r\n      </view>\r\n\r\n      <!-- è”ç³»ç”µè¯ -->\r\n      <view class=\"form-section\">\r\n        <view class=\"section-title required\">è”ç³»ç”µè¯</view>\r\n        <view class=\"form-input-wrapper\">\r\n          <input\r\n            class=\"form-input\"\r\n            v-model=\"formData.contactPhone\"\r\n            type=\"number\"\r\n            placeholder=\"è¯·è¾“å…¥è”ç³»ç”µè¯\"\r\n            maxlength=\"11\"\r\n          />\r\n        </view>\r\n      </view>\r\n\r\n      <!-- è”ç³»äºº -->\r\n      <view class=\"form-section\">\r\n        <view class=\"section-title required\">è”ç³»äºº</view>\r\n        <view class=\"form-input-wrapper\">\r\n          <input\r\n            class=\"form-input\"\r\n            v-model=\"formData.contactName\"\r\n            type=\"text\"\r\n            placeholder=\"è¯·è¾“å…¥è”ç³»äººå§“å\"\r\n            maxlength=\"20\"\r\n          />\r\n        </view>\r\n      </view>\r\n\r\n      <!-- æ ‡ç­¾ -->\r\n      <view class=\"form-section\">\r\n        <view class=\"section-title\">æ ‡ç­¾ï¼ˆå¯é€‰ï¼‰</view>\r\n        <view class=\"form-input-wrapper\">\r\n          <input\r\n            class=\"form-input\"\r\n            v-model=\"formData.tags\"\r\n            type=\"text\"\r\n            placeholder=\"å¦‚ï¼šåŠ æ€¥ã€æ˜“ç¢ã€è´µé‡å“\"\r\n            maxlength=\"50\"\r\n          />\r\n        </view>\r\n      </view>\r\n\r\n      <!-- è®¢å•ä¼°ä»· -->\r\n      <view class=\"form-section price-section\">\r\n        <view class=\"section-title\">è®¢å•ä¼°ä»·</view>\r\n        <view class=\"price-display\">\r\n          <text class=\"price-symbol\">Â¥</text>\r\n          <text class=\"price-value\">{{ estimatedPrice }}</text>\r\n        </view>\r\n        <view class=\"price-breakdown\" v-if=\"priceBreakdown\">\r\n          <text class=\"breakdown-item\">èµ·æ­¥ä»·ï¼šÂ¥{{ priceBreakdown.basePrice }}</text>\r\n          <text class=\"breakdown-item\" v-if=\"priceBreakdown.distanceFee\">é‡Œç¨‹è´¹ï¼šÂ¥{{ priceBreakdown.distanceFee }}</text>\r\n          <text class=\"breakdown-item\" v-if=\"priceBreakdown.weatherFee\">å¤©æ°”åŠ ä»·ï¼šÃ—{{ priceBreakdown.weatherRate }}</text>\r\n        </view>\r\n      </view>\r\n    </scroll-view>\r\n\r\n    <!-- åº•éƒ¨æäº¤æŒ‰é’® -->\r\n    <view class=\"bottom-bar\">\r\n      <view class=\"bar-left\">\r\n        <text class=\"bar-label\">é¢„ä¼°ï¼š</text>\r\n        <text class=\"bar-price\">Â¥{{ estimatedPrice }}</text>\r\n      </view>\r\n      <button class=\"btn-submit\" @click=\"submitOrder\" :disabled=\"!canSubmit\">\r\n        æäº¤è®¢å•\r\n      </button>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { createOrder } from '@/api/order.js'\r\nimport { getConfigs } from '@/api/config.js'\r\nimport { getUserInfo } from '@/api/user.js'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      // æœåŠ¡ç±»å‹\r\n      serviceTypes: [\r\n        { label: 'å¸®æˆ‘ä¹°', value: 1, icon: 'ğŸ›’' },\r\n        { label: 'å¸®æˆ‘é€', value: 2, icon: 'ğŸ“¦' },\r\n        { label: 'å¸®æˆ‘å–', value: 3, icon: 'ğŸ”‘' },\r\n        { label: 'å…¨èƒ½', value: 4, icon: 'ğŸŒŸ' }\r\n      ],\r\n\r\n      // è¡¨å•æ•°æ®\r\n      formData: {\r\n        type: 1, // è®¢å•ç±»å‹ï¼š1-å¸®ä¹°, 2-å¸®é€, 3-å¸®å–, 4-å…¨èƒ½\r\n        goodsDesc: '',\r\n        pickupAddress: null, // å–ä»¶åœ°å€å¯¹è±¡\r\n        deliveryAddress: null, // é€è¾¾åœ°å€å¯¹è±¡\r\n        contactPhone: '',\r\n        contactName: '',\r\n        tags: '', // æ ‡ç­¾ï¼ˆå¯é€‰ï¼‰\r\n        weight: null, // é‡é‡ï¼ˆå¯é€‰ï¼‰\r\n        distance: null // è·ç¦»ï¼ˆå¯é€‰ï¼‰\r\n      },\r\n\r\n      // ç³»ç»Ÿé…ç½®\r\n      config: {\r\n        basePrice: 3, // èµ·æ­¥ä»·\r\n        perKmPrice: 1, // æ¯å…¬é‡Œä»·æ ¼\r\n        weatherRate: 1, // å¤©æ°”åŠ ä»·å€ç‡\r\n        platformRate: 0.1 // å¹³å°æŠ½æˆæ¯”ä¾‹\r\n      },\r\n\r\n      // ä¼°ä»·\r\n      estimatedPrice: '0.00',\r\n      priceBreakdown: null\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    // æ˜¯å¦å¯ä»¥æäº¤\r\n    canSubmit() {\r\n      return (\r\n        this.formData.type &&\r\n        this.formData.goodsDesc.trim() &&\r\n        this.formData.pickupAddress &&\r\n        this.formData.deliveryAddress &&\r\n        this.formData.contactPhone &&\r\n        this.formData.contactName\r\n      )\r\n    }\r\n  },\r\n\r\n  async onLoad(options) {\r\n    // å¦‚æœä»é¦–é¡µé€‰æ‹©æœåŠ¡ç±»å‹è¿›å…¥\r\n    if (options.serviceType) {\r\n      this.formData.type = Number(options.serviceType)\r\n    }\r\n\r\n    // åŠ è½½ç³»ç»Ÿé…ç½®\r\n    await this.loadConfig()\r\n\r\n    // åŠ è½½ç”¨æˆ·ä¿¡æ¯\r\n    await this.loadUserInfo()\r\n\r\n    // è®¡ç®—ä»·æ ¼\r\n    this.calculatePrice()\r\n  },\r\n\r\n  onShow() {\r\n    // ä»åœ°å€é€‰æ‹©é¡µè¿”å›æ—¶ï¼Œæ£€æŸ¥åœ°å€æ˜¯å¦å·²é€‰æ‹©\r\n    console.log('âœ… è®¢å•é¡µé¢ onShow è§¦å‘')\r\n    console.log('å½“å‰è¡¨å•æ•°æ®:', JSON.stringify(this.formData, null, 2))\r\n\r\n    // å¼ºåˆ¶æ›´æ–°è§†å›¾\r\n    this.$forceUpdate()\r\n\r\n    // é‡æ–°è®¡ç®—ä»·æ ¼ï¼ˆå¦‚æœåœ°å€å·²é€‰æ‹©ï¼‰\r\n    if (this.formData.pickupAddress || this.formData.deliveryAddress) {\r\n      console.log('åœ°å€å·²é€‰æ‹©ï¼Œé‡æ–°è®¡ç®—ä»·æ ¼')\r\n      this.calculatePrice()\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    /**\r\n     * åŠ è½½ç³»ç»Ÿé…ç½®\r\n     */\r\n    async loadConfig() {\r\n      try {\r\n        const res = await getConfigs('base_price,per_km_price,weather_rate,platform_rate')\r\n\r\n        if (res.code === 200 && res.data) {\r\n          const data = res.data\r\n          this.config = {\r\n            basePrice: Number(data.base_price || 3),\r\n            perKmPrice: Number(data.per_km_price || 1),\r\n            weatherRate: Number(data.weather_rate || 1),\r\n            platformRate: Number(data.platform_rate || 0.1)\r\n          }\r\n          console.log('âœ… ç³»ç»Ÿé…ç½®åŠ è½½æˆåŠŸ:', this.config)\r\n        }\r\n      } catch (error) {\r\n        console.error('âŒ åŠ è½½é…ç½®å¤±è´¥:', error)\r\n        // ä½¿ç”¨é»˜è®¤é…ç½®\r\n      }\r\n    },\r\n\r\n    /**\r\n     * åŠ è½½ç”¨æˆ·ä¿¡æ¯\r\n     */\r\n    async loadUserInfo() {\r\n      try {\r\n        const res = await getUserInfo()\r\n        if (res.code === 200 && res.data) {\r\n          // è‡ªåŠ¨å¡«å……è”ç³»ç”µè¯\r\n          if (res.data.mobile) {\r\n            this.formData.contactPhone = res.data.mobile\r\n          }\r\n          // è‡ªåŠ¨å¡«å……è”ç³»äºº\r\n          if (res.data.nickname) {\r\n            this.formData.contactName = res.data.nickname\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('âŒ åŠ è½½ç”¨æˆ·ä¿¡æ¯å¤±è´¥:', error)\r\n      }\r\n    },\r\n\r\n    /**\r\n     * é€‰æ‹©æœåŠ¡ç±»å‹\r\n     */\r\n    selectServiceType(type) {\r\n      this.formData.type = type\r\n      this.calculatePrice()\r\n    },\r\n\r\n    /**\r\n     * é€‰æ‹©å–ä»¶åœ°å€\r\n     */\r\n    selectPickupAddress() {\r\n      console.log('è·³è½¬åˆ°é€‰æ‹©å–ä»¶åœ°å€é¡µé¢')\r\n      uni.navigateTo({\r\n        url: '/pages/address/list?from=order&field=pickup'\r\n      })\r\n    },\r\n\r\n    /**\r\n     * é€‰æ‹©é€è¾¾åœ°å€\r\n     */\r\n    selectDeliveryAddress() {\r\n      console.log('è·³è½¬åˆ°é€‰æ‹©é€è¾¾åœ°å€é¡µé¢')\r\n      uni.navigateTo({\r\n        url: '/pages/address/list?from=order&field=delivery'\r\n      })\r\n    },\r\n\r\n    /**\r\n     * è®¡ç®—è®¢å•ä»·æ ¼\r\n     */\r\n    calculatePrice() {\r\n      // TODO: å®é™…åº”è¯¥æ ¹æ®è·ç¦»è®¡ç®—ï¼Œè¿™é‡Œä½¿ç”¨ç®€åŒ–ç‰ˆæœ¬\r\n      // åŸºç¡€ä»·æ ¼ = èµ·æ­¥ä»· + å›ºå®šé‡Œç¨‹è´¹\r\n      const baseFee = this.config.basePrice\r\n      const distanceFee = 2 * this.config.perKmPrice // å‡è®¾å›ºå®š2å…¬é‡Œ\r\n      const subtotal = baseFee + distanceFee\r\n      const total = subtotal * this.config.weatherRate\r\n\r\n      this.estimatedPrice = total.toFixed(2)\r\n\r\n      this.priceBreakdown = {\r\n        basePrice: baseFee.toFixed(2),\r\n        distanceFee: distanceFee.toFixed(2),\r\n        weatherRate: this.config.weatherRate\r\n      }\r\n    },\r\n\r\n    /**\r\n     * è¡¨å•éªŒè¯\r\n     */\r\n    validateForm() {\r\n      if (!this.formData.type) {\r\n        uni.showToast({ title: 'è¯·é€‰æ‹©æœåŠ¡ç±»å‹', icon: 'none' })\r\n        return false\r\n      }\r\n\r\n      if (!this.formData.goodsDesc.trim()) {\r\n        uni.showToast({ title: 'è¯·è¾“å…¥ç‰©å“ä¿¡æ¯', icon: 'none' })\r\n        return false\r\n      }\r\n\r\n      if (!this.formData.pickupAddress) {\r\n        uni.showToast({ title: 'è¯·é€‰æ‹©å–ä»¶åœ°å€', icon: 'none' })\r\n        return false\r\n      }\r\n\r\n      if (!this.formData.deliveryAddress) {\r\n        uni.showToast({ title: 'è¯·é€‰æ‹©é€è¾¾åœ°å€', icon: 'none' })\r\n        return false\r\n      }\r\n\r\n      // éªŒè¯ç»çº¬åº¦åæ ‡ï¼ˆç¡®ä¿åœ°å€åœ¨åœ°å›¾ä¸Šç‚¹é€‰è¿‡ï¼‰\r\n      if (!this.formData.pickupAddress.lat || !this.formData.pickupAddress.lng) {\r\n        uni.showToast({ title: 'å–ä»¶åœ°å€ç¼ºå°‘åæ ‡ï¼Œè¯·é‡æ–°é€‰æ‹©', icon: 'none' })\r\n        return false\r\n      }\r\n\r\n      if (!this.formData.deliveryAddress.lat || !this.formData.deliveryAddress.lng) {\r\n        uni.showToast({ title: 'é€è¾¾åœ°å€ç¼ºå°‘åæ ‡ï¼Œè¯·é‡æ–°é€‰æ‹©', icon: 'none' })\r\n        return false\r\n      }\r\n\r\n      // éªŒè¯æ‰‹æœºå·\r\n      const phoneReg = /^1[3-9]\\d{9}$/\r\n      if (!phoneReg.test(this.formData.contactPhone)) {\r\n        uni.showToast({ title: 'è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·', icon: 'none' })\r\n        return false\r\n      }\r\n\r\n      if (!this.formData.contactName.trim()) {\r\n        uni.showToast({ title: 'è¯·è¾“å…¥è”ç³»äººå§“å', icon: 'none' })\r\n        return false\r\n      }\r\n\r\n      // å¢åŠ é˜²å‘†æ£€æŸ¥ï¼šé˜²æ­¢ä½¿ç”¨å¸¦æœ‰åŒ—äº¬é»˜è®¤åæ ‡çš„åœ°å€ï¼ˆå¦‚æœæ˜¯å¤–åœ°åœ°å€ï¼‰\r\n      if (this.formData.pickupAddress.lat && Math.abs(this.formData.pickupAddress.lat - 39.9) < 0.1 && !this.formData.pickupAddress.detail.includes('åŒ—äº¬')) {\r\n        uni.showToast({ title: 'å–ä»¶åœ°å€å®šä½å¼‚å¸¸ï¼ˆåœ¨åŒ—äº¬ï¼‰ï¼Œè¯·å‰å¾€åœ°å€ç®¡ç†é‡æ–°å¼€å¯åœ°å›¾é€‰ç‚¹', icon: 'none', duration: 3000 })\r\n        return false\r\n      }\r\n\r\n      if (this.formData.deliveryAddress.lat && Math.abs(this.formData.deliveryAddress.lat - 39.9) < 0.1 && !this.formData.deliveryAddress.detail.includes('åŒ—äº¬')) {\r\n        uni.showToast({ title: 'é€è¾¾åœ°å€å®šä½å¼‚å¸¸ï¼ˆåœ¨åŒ—äº¬ï¼‰ï¼Œè¯·å‰å¾€åœ°å€ç®¡ç†é‡æ–°å¼€å¯åœ°å›¾é€‰ç‚¹', icon: 'none', duration: 3000 })\r\n        return false\r\n      }\r\n\r\n      return true\r\n    },\r\n\r\n    /**\r\n     * æäº¤è®¢å•\r\n     */\r\n    async submitOrder() {\r\n      // è¡¨å•éªŒè¯\r\n      if (!this.validateForm()) {\r\n        return\r\n      }\r\n\r\n      try {\r\n        uni.showLoading({ title: 'æäº¤ä¸­...' })\r\n\r\n        // æ„é€ è®¢å•æ•°æ® - å®Œå…¨åŒ¹é…åç«¯ OrderCreateDTO\r\n        const orderData = {\r\n          type: this.formData.type, // è®¢å•ç±»å‹ï¼š1-å¸®ä¹°, 2-å¸®é€, 3-å¸®å–, 4-å…¨èƒ½\r\n          goodsDesc: this.formData.goodsDesc, // ç‰©å“æè¿°\r\n          pickupAddr: this.formData.pickupAddress.detail, // å–è´§åœ°å€ï¼ˆè¯¦ç»†é—¨ç‰Œå·ï¼‰\r\n          pickupLat: this.formData.pickupAddress.lat, // å–è´§çº¬åº¦\r\n          pickupLng: this.formData.pickupAddress.lng, // å–è´§ç»åº¦\r\n          deliveryAddr: this.formData.deliveryAddress.detail, // é€è´§åœ°å€ï¼ˆè¯¦ç»†é—¨ç‰Œå·ï¼‰\r\n          deliveryLat: this.formData.deliveryAddress.lat, // é€è¾¾çº¬åº¦\r\n          deliveryLng: this.formData.deliveryAddress.lng, // é€è¾¾ç»åº¦\r\n          contactName: this.formData.contactName, // æ”¶è´§äººå§“å\r\n          contactPhone: this.formData.contactPhone, // æ”¶è´§äººç”µè¯\r\n          weight: this.formData.weight, // é‡é‡ï¼ˆå¯é€‰ï¼‰\r\n          tags: this.formData.tags || undefined, // æ ‡ç­¾ï¼ˆå¯é€‰ï¼‰\r\n          distance: this.formData.distance || undefined // è·ç¦»ï¼ˆå¯é€‰ï¼‰\r\n        }\r\n\r\n        console.log('ğŸ“¤ [CREATE] å‡†å¤‡æäº¤è®¢å•æ•°æ®:', JSON.stringify(orderData, null, 2))\r\n\r\n        const res = await createOrder(orderData)\r\n\r\n        console.log('ğŸ“¥ åˆ›å»ºè®¢å•å“åº”:', JSON.stringify(res, null, 2))\r\n\r\n        uni.hideLoading()\r\n\r\n        if (res.code === 200) {\r\n          const orderInfo = res.data\r\n          console.log('âœ… è®¢å•ä¿¡æ¯:', orderInfo)\r\n\r\n          // åç«¯è¿”å›çš„å­—æ®µåï¼šid å’Œ totalFee\r\n          const orderId = orderInfo.id\r\n          const totalAmount = orderInfo.totalFee || '0.00'\r\n\r\n          console.log('è®¢å•ID:', orderId)\r\n          console.log('è®¢å•é‡‘é¢:', totalAmount)\r\n\r\n          if (!orderId) {\r\n            console.error('âŒ è®¢å•IDä¸å­˜åœ¨ï¼Œæ— æ³•è·³è½¬æ”¯ä»˜é¡µé¢')\r\n            uni.showToast({\r\n              title: 'è®¢å•åˆ›å»ºå¤±è´¥ï¼Œç¼ºå°‘è®¢å•ID',\r\n              icon: 'none',\r\n              duration: 2000\r\n            })\r\n            return\r\n          }\r\n\r\n          uni.showToast({\r\n            title: 'è®¢å•åˆ›å»ºæˆåŠŸ',\r\n            icon: 'success',\r\n            duration: 1500\r\n          })\r\n\r\n          // è·³è½¬åˆ°æ”¯ä»˜é¡µé¢\r\n          setTimeout(() => {\r\n            uni.navigateTo({\r\n              url: `/pages/order/payment?orderId=${orderId}&totalAmount=${totalAmount}`\r\n            })\r\n          }, 1500)\r\n        } else {\r\n          uni.showToast({\r\n            title: res.message || 'åˆ›å»ºå¤±è´¥',\r\n            icon: 'none'\r\n          })\r\n        }\r\n      } catch (error) {\r\n        uni.hideLoading()\r\n        console.error('âŒ åˆ›å»ºè®¢å•å¤±è´¥:', error)\r\n        uni.showToast({\r\n          title: 'åˆ›å»ºå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•',\r\n          icon: 'none'\r\n        })\r\n      }\r\n    },\r\n\r\n    /**\r\n     * è¿”å›ä¸Šä¸€é¡µ\r\n     */\r\n    goBack() {\r\n      uni.navigateBack()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.order-create-container {\r\n  min-height: 100vh;\r\n  background-color: #f5f5f5;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n/* å¯¼èˆªæ  */\r\n.nav-bar {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  height: 44px;\r\n  padding: 0 15px;\r\n  background-color: #fff;\r\n  border-bottom: 1px solid #eee;\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  z-index: 100;\r\n}\r\n\r\n.nav-back {\r\n  width: 40px;\r\n  height: 40px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 24px;\r\n  color: #333;\r\n  cursor: pointer;\r\n}\r\n\r\n.nav-title {\r\n  font-size: 17px;\r\n  font-weight: 600;\r\n  color: #333;\r\n}\r\n\r\n.nav-placeholder {\r\n  width: 40px;\r\n}\r\n\r\n/* è¡¨å•å†…å®¹ */\r\n.form-content {\r\n  flex: 1;\r\n  margin-top: 54px;\r\n  margin-bottom: 70px;\r\n  padding: 15px;\r\n}\r\n\r\n.form-section {\r\n  background-color: #fff;\r\n  border-radius: 12px;\r\n  padding: 20px;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.section-title {\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: #333;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.section-title.required::before {\r\n  content: '*';\r\n  color: #ff4d4f;\r\n  margin-right: 4px;\r\n}\r\n\r\n/* æœåŠ¡ç±»å‹ */\r\n.service-type-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(4, 1fr);\r\n  gap: 10px;\r\n}\r\n\r\n.service-type-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 15px 5px;\r\n  background-color: #f5f7fa;\r\n  border-radius: 8px;\r\n  border: 2px solid transparent;\r\n  cursor: pointer;\r\n  transition: all 0.3s;\r\n}\r\n\r\n.service-type-item.active {\r\n  background-color: #f0f4ff;\r\n  border-color: #667eea;\r\n}\r\n\r\n.service-icon {\r\n  font-size: 24px;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.service-name {\r\n  font-size: 12px;\r\n  color: #666;\r\n}\r\n\r\n.service-type-item.active .service-name {\r\n  color: #667eea;\r\n  font-weight: 600;\r\n}\r\n\r\n/* è¾“å…¥æ¡† */\r\n.form-input-wrapper {\r\n  position: relative;\r\n}\r\n\r\n.form-input {\r\n  width: 100%;\r\n  height: 44px;\r\n  padding: 0 15px;\r\n  background-color: #f5f7fa;\r\n  border-radius: 8px;\r\n  font-size: 15px;\r\n  color: #333;\r\n}\r\n\r\n.form-textarea {\r\n  width: 100%;\r\n  min-height: 80px;\r\n  padding: 12px 15px;\r\n  background-color: #f5f7fa;\r\n  border-radius: 8px;\r\n  font-size: 15px;\r\n  color: #333;\r\n  line-height: 1.6;\r\n}\r\n\r\n.char-count {\r\n  position: absolute;\r\n  bottom: 8px;\r\n  right: 12px;\r\n  font-size: 12px;\r\n  color: #999;\r\n}\r\n\r\n/* åœ°å€é€‰æ‹© */\r\n.address-selector {\r\n  min-height: 80px;\r\n  display: flex;\r\n  align-items: center;\r\n  background-color: #f5f7fa;\r\n  border-radius: 8px;\r\n  padding: 12px 15px;\r\n  cursor: pointer;\r\n}\r\n\r\n.address-content {\r\n  flex: 1;\r\n}\r\n\r\n.address-header {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.contact-name {\r\n  font-size: 15px;\r\n  font-weight: 600;\r\n  color: #333;\r\n  margin-right: 12px;\r\n}\r\n\r\n.contact-phone {\r\n  font-size: 13px;\r\n  color: #666;\r\n}\r\n\r\n.contact-info {\r\n  margin-bottom: 6px;\r\n}\r\n\r\n.contact-person {\r\n  font-size: 13px;\r\n  color: #666;\r\n}\r\n\r\n.address-detail {\r\n  font-size: 13px;\r\n  color: #666;\r\n  line-height: 1.5;\r\n}\r\n\r\n.address-placeholder {\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n\r\n.placeholder-text {\r\n  font-size: 14px;\r\n  color: #999;\r\n}\r\n\r\n.placeholder-arrow {\r\n  font-size: 20px;\r\n  color: #999;\r\n}\r\n\r\n/* ä»·æ ¼ */\r\n.price-section {\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n}\r\n\r\n.price-section .section-title {\r\n  color: #fff;\r\n}\r\n\r\n.price-display {\r\n  display: flex;\r\n  align-items: baseline;\r\n  margin: 15px 0;\r\n}\r\n\r\n.price-symbol {\r\n  font-size: 24px;\r\n  color: #fff;\r\n  margin-right: 4px;\r\n}\r\n\r\n.price-value {\r\n  font-size: 40px;\r\n  font-weight: bold;\r\n  color: #fff;\r\n}\r\n\r\n.price-breakdown {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 6px;\r\n}\r\n\r\n.breakdown-item {\r\n  font-size: 13px;\r\n  color: rgba(255, 255, 255, 0.8);\r\n}\r\n\r\n/* åº•éƒ¨æŒ‰é’® */\r\n.bottom-bar {\r\n  position: fixed;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 10px 15px;\r\n  background-color: #fff;\r\n  border-top: 1px solid #eee;\r\n  box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.bar-left {\r\n  flex: 1;\r\n}\r\n\r\n.bar-label {\r\n  font-size: 14px;\r\n  color: #666;\r\n}\r\n\r\n.bar-price {\r\n  font-size: 22px;\r\n  font-weight: bold;\r\n  color: #ff4d4f;\r\n  margin-left: 8px;\r\n}\r\n\r\n.btn-submit {\r\n  width: 120px;\r\n  height: 44px;\r\n  line-height: 44px;\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  color: #fff;\r\n  font-size: 15px;\r\n  font-weight: 600;\r\n  border-radius: 22px;\r\n  border: none;\r\n}\r\n\r\n.btn-submit[disabled] {\r\n  opacity: 0.5;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'E:/Delivery Service Platform/uniapp/pages/order/create.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","getConfigs","getUserInfo","createOrder"],"mappings":"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"}