{"version":3,"file":"create.js","sources":["pages/order/create.vue","D:/Users/windows/Downloads/HBuilderX.4.85.2025110510/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvb3JkZXIvY3JlYXRlLnZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"order-create-container\">\r\n    <!-- È°∂ÈÉ®ÂØºËà™Ê†è -->\r\n    <view class=\"nav-bar\">\r\n      <view class=\"nav-back\" @click=\"goBack\">\r\n        <text class=\"iconfont\">‚Äπ</text>\r\n      </view>\r\n      <view class=\"nav-title\">ÂèëÂ∏ÉËÆ¢Âçï</view>\r\n      <view class=\"nav-placeholder\"></view>\r\n    </view>\r\n\r\n    <!-- Ë°®ÂçïÂÜÖÂÆπ -->\r\n    <scroll-view class=\"form-content\" scroll-y>\r\n      <!-- ÊúçÂä°Á±ªÂûã -->\r\n      <view class=\"form-section\">\r\n        <view class=\"section-title required\">ÊúçÂä°Á±ªÂûã</view>\r\n        <view class=\"service-type-grid\">\r\n          <view\r\n            class=\"service-type-item\"\r\n            :class=\"{ active: formData.type === item.value }\"\r\n            v-for=\"item in serviceTypes\"\r\n            :key=\"item.value\"\r\n            @click=\"selectServiceType(item.value)\"\r\n          >\r\n            <text class=\"service-icon\">{{ item.icon }}</text>\r\n            <text class=\"service-name\">{{ item.label }}</text>\r\n          </view>\r\n        </view>\r\n      </view>\r\n\r\n      <!-- Áâ©ÂìÅ‰ø°ÊÅØ -->\r\n      <view class=\"form-section\">\r\n        <view class=\"section-title required\">Áâ©ÂìÅ‰ø°ÊÅØ</view>\r\n        <view class=\"form-input-wrapper\">\r\n          <textarea\r\n            class=\"form-textarea\"\r\n            v-model=\"formData.goodsDesc\"\r\n            placeholder=\"ËØ∑ÊèèËø∞Áâ©ÂìÅ‰ø°ÊÅØÔºåÂ¶ÇÔºöÂ∏Æ‰π∞‰∏ÄÊùØÂ•∂Ëå∂ÔºåÂ∞ëÂÜ∞Â∞ëÁ≥ñ\"\r\n            maxlength=\"200\"\r\n            :show-confirm-bar=\"false\"\r\n          />\r\n          <view class=\"char-count\">{{ formData.goodsDesc.length }}/200</view>\r\n        </view>\r\n      </view>\r\n\r\n      <!-- Âèñ‰ª∂Âú∞ÂùÄ -->\r\n      <view class=\"form-section\">\r\n        <view class=\"section-title required\">Âèñ‰ª∂Âú∞ÂùÄ</view>\r\n        <view class=\"address-selector\" @click=\"selectPickupAddress\">\r\n          <view class=\"address-content\" v-if=\"formData.pickupAddress\">\r\n            <view class=\"address-header\">\r\n              <text class=\"contact-name\">{{ formData.pickupAddress.addressName }}</text>\r\n              <text class=\"contact-phone\">{{ formData.pickupAddress.contactPhone }}</text>\r\n            </view>\r\n            <view class=\"contact-info\" v-if=\"formData.pickupAddress.contactName\">\r\n              <text class=\"contact-person\">ËÅîÁ≥ª‰∫∫: {{ formData.pickupAddress.contactName }}</text>\r\n            </view>\r\n            <view class=\"address-detail\">\r\n              {{ formData.pickupAddress.detail }}\r\n            </view>\r\n          </view>\r\n          <view class=\"address-placeholder\" v-else>\r\n            <text class=\"placeholder-text\">ËØ∑ÈÄâÊã©Âèñ‰ª∂Âú∞ÂùÄ</text>\r\n            <text class=\"placeholder-arrow\">‚Ä∫</text>\r\n          </view>\r\n        </view>\r\n      </view>\r\n\r\n      <!-- ÈÄÅËææÂú∞ÂùÄ -->\r\n      <view class=\"form-section\">\r\n        <view class=\"section-title required\">ÈÄÅËææÂú∞ÂùÄ</view>\r\n        <view class=\"address-selector\" @click=\"selectDeliveryAddress\">\r\n          <view class=\"address-content\" v-if=\"formData.deliveryAddress\">\r\n            <view class=\"address-header\">\r\n              <text class=\"contact-name\">{{ formData.deliveryAddress.addressName }}</text>\r\n              <text class=\"contact-phone\">{{ formData.deliveryAddress.contactPhone }}</text>\r\n            </view>\r\n            <view class=\"contact-info\" v-if=\"formData.deliveryAddress.contactName\">\r\n              <text class=\"contact-person\">ËÅîÁ≥ª‰∫∫: {{ formData.deliveryAddress.contactName }}</text>\r\n            </view>\r\n            <view class=\"address-detail\">\r\n              {{ formData.deliveryAddress.detail }}\r\n            </view>\r\n          </view>\r\n          <view class=\"address-placeholder\" v-else>\r\n            <text class=\"placeholder-text\">ËØ∑ÈÄâÊã©ÈÄÅËææÂú∞ÂùÄ</text>\r\n            <text class=\"placeholder-arrow\">‚Ä∫</text>\r\n          </view>\r\n        </view>\r\n      </view>\r\n\r\n      <!-- ËÅîÁ≥ªÁîµËØù -->\r\n      <view class=\"form-section\">\r\n        <view class=\"section-title required\">ËÅîÁ≥ªÁîµËØù</view>\r\n        <view class=\"form-input-wrapper\">\r\n          <input\r\n            class=\"form-input\"\r\n            v-model=\"formData.contactPhone\"\r\n            type=\"number\"\r\n            placeholder=\"ËØ∑ËæìÂÖ•ËÅîÁ≥ªÁîµËØù\"\r\n            maxlength=\"11\"\r\n          />\r\n        </view>\r\n      </view>\r\n\r\n      <!-- ËÅîÁ≥ª‰∫∫ -->\r\n      <view class=\"form-section\">\r\n        <view class=\"section-title required\">ËÅîÁ≥ª‰∫∫</view>\r\n        <view class=\"form-input-wrapper\">\r\n          <input\r\n            class=\"form-input\"\r\n            v-model=\"formData.contactName\"\r\n            type=\"text\"\r\n            placeholder=\"ËØ∑ËæìÂÖ•ËÅîÁ≥ª‰∫∫ÂßìÂêç\"\r\n            maxlength=\"20\"\r\n          />\r\n        </view>\r\n      </view>\r\n\r\n      <!-- Ê†áÁ≠æ -->\r\n      <view class=\"form-section\">\r\n        <view class=\"section-title\">Ê†áÁ≠æÔºàÂèØÈÄâÔºâ</view>\r\n        <view class=\"form-input-wrapper\">\r\n          <input\r\n            class=\"form-input\"\r\n            v-model=\"formData.tags\"\r\n            type=\"text\"\r\n            placeholder=\"Â¶ÇÔºöÂä†ÊÄ•„ÄÅÊòìÁ¢é„ÄÅË¥µÈáçÂìÅ\"\r\n            maxlength=\"50\"\r\n          />\r\n        </view>\r\n      </view>\r\n\r\n      <!-- ËÆ¢Âçï‰º∞‰ª∑ -->\r\n      <view class=\"form-section price-section\">\r\n        <view class=\"section-title\">ËÆ¢Âçï‰º∞‰ª∑</view>\r\n        <view class=\"price-display\">\r\n          <text class=\"price-symbol\">¬•</text>\r\n          <text class=\"price-value\">{{ estimatedPrice }}</text>\r\n        </view>\r\n        <view class=\"price-breakdown\" v-if=\"priceBreakdown\">\r\n          <text class=\"breakdown-item\">Ëµ∑Ê≠•‰ª∑Ôºö¬•{{ priceBreakdown.basePrice }}</text>\r\n          <text class=\"breakdown-item\" v-if=\"priceBreakdown.distanceFee\">ÈáåÁ®ãË¥πÔºö¬•{{ priceBreakdown.distanceFee }}</text>\r\n          <text class=\"breakdown-item\" v-if=\"priceBreakdown.weatherFee\">Â§©Ê∞îÂä†‰ª∑Ôºö√ó{{ priceBreakdown.weatherRate }}</text>\r\n        </view>\r\n      </view>\r\n    </scroll-view>\r\n\r\n    <!-- Â∫ïÈÉ®Êèê‰∫§ÊåâÈíÆ -->\r\n    <view class=\"bottom-bar\">\r\n      <view class=\"bar-left\">\r\n        <text class=\"bar-label\">È¢Ñ‰º∞Ôºö</text>\r\n        <text class=\"bar-price\">¬•{{ estimatedPrice }}</text>\r\n      </view>\r\n      <button class=\"btn-submit\" @click=\"submitOrder\" :disabled=\"!canSubmit\">\r\n        Êèê‰∫§ËÆ¢Âçï\r\n      </button>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { createOrder } from '@/api/order.js'\r\nimport { getConfigs } from '@/api/config.js'\r\nimport { getUserInfo } from '@/api/user.js'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      // ÊúçÂä°Á±ªÂûã\r\n      serviceTypes: [\r\n        { label: 'Â∏ÆÊàë‰π∞', value: 1, icon: 'üõí' },\r\n        { label: 'Â∏ÆÊàëÈÄÅ', value: 2, icon: 'üì¶' },\r\n        { label: 'Â∏ÆÊàëÂèñ', value: 3, icon: 'üîë' },\r\n        { label: 'ÂÖ®ËÉΩ', value: 4, icon: 'üåü' }\r\n      ],\r\n\r\n      // Ë°®ÂçïÊï∞ÊçÆ\r\n      formData: {\r\n        type: 1, // ËÆ¢ÂçïÁ±ªÂûãÔºö1-Â∏Æ‰π∞, 2-Â∏ÆÈÄÅ, 3-Â∏ÆÂèñ, 4-ÂÖ®ËÉΩ\r\n        goodsDesc: '',\r\n        pickupAddress: null, // Âèñ‰ª∂Âú∞ÂùÄÂØπË±°\r\n        deliveryAddress: null, // ÈÄÅËææÂú∞ÂùÄÂØπË±°\r\n        contactPhone: '',\r\n        contactName: '',\r\n        tags: '', // Ê†áÁ≠æÔºàÂèØÈÄâÔºâ\r\n        weight: null, // ÈáçÈáèÔºàÂèØÈÄâÔºâ\r\n        distance: null // Ë∑ùÁ¶ªÔºàÂèØÈÄâÔºâ\r\n      },\r\n\r\n      // Á≥ªÁªüÈÖçÁΩÆ\r\n      config: {\r\n        basePrice: 3, // Ëµ∑Ê≠•‰ª∑\r\n        perKmPrice: 1, // ÊØèÂÖ¨Èáå‰ª∑Ê†º\r\n        weatherRate: 1, // Â§©Ê∞îÂä†‰ª∑ÂÄçÁéá\r\n        platformRate: 0.1 // Âπ≥Âè∞ÊäΩÊàêÊØî‰æã\r\n      },\r\n\r\n      // ‰º∞‰ª∑\r\n      estimatedPrice: '0.00',\r\n      priceBreakdown: null\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    // ÊòØÂê¶ÂèØ‰ª•Êèê‰∫§\r\n    canSubmit() {\r\n      return (\r\n        this.formData.type &&\r\n        this.formData.goodsDesc.trim() &&\r\n        this.formData.pickupAddress &&\r\n        this.formData.deliveryAddress &&\r\n        this.formData.contactPhone &&\r\n        this.formData.contactName\r\n      )\r\n    }\r\n  },\r\n\r\n  async onLoad(options) {\r\n    // Â¶ÇÊûú‰ªéÈ¶ñÈ°µÈÄâÊã©ÊúçÂä°Á±ªÂûãËøõÂÖ•\r\n    if (options.serviceType) {\r\n      this.formData.type = Number(options.serviceType)\r\n    }\r\n\r\n    // Âä†ËΩΩÁ≥ªÁªüÈÖçÁΩÆ\r\n    await this.loadConfig()\r\n\r\n    // Âä†ËΩΩÁî®Êà∑‰ø°ÊÅØ\r\n    await this.loadUserInfo()\r\n\r\n    // ËÆ°ÁÆó‰ª∑Ê†º\r\n    this.calculatePrice()\r\n  },\r\n\r\n  onShow() {\r\n    // ‰ªéÂú∞ÂùÄÈÄâÊã©È°µËøîÂõûÊó∂ÔºåÊ£ÄÊü•Âú∞ÂùÄÊòØÂê¶Â∑≤ÈÄâÊã©\r\n    console.log('‚úÖ ËÆ¢ÂçïÈ°µÈù¢ onShow Ëß¶Âèë')\r\n    console.log('ÂΩìÂâçË°®ÂçïÊï∞ÊçÆ:', JSON.stringify(this.formData, null, 2))\r\n\r\n    // Âº∫Âà∂Êõ¥Êñ∞ËßÜÂõæ\r\n    this.$forceUpdate()\r\n\r\n    // ÈáçÊñ∞ËÆ°ÁÆó‰ª∑Ê†ºÔºàÂ¶ÇÊûúÂú∞ÂùÄÂ∑≤ÈÄâÊã©Ôºâ\r\n    if (this.formData.pickupAddress || this.formData.deliveryAddress) {\r\n      console.log('Âú∞ÂùÄÂ∑≤ÈÄâÊã©ÔºåÈáçÊñ∞ËÆ°ÁÆó‰ª∑Ê†º')\r\n      this.calculatePrice()\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    /**\r\n     * Âä†ËΩΩÁ≥ªÁªüÈÖçÁΩÆ\r\n     */\r\n    async loadConfig() {\r\n      try {\r\n        const res = await getConfigs('base_price,per_km_price,weather_rate,platform_rate')\r\n\r\n        if (res.code === 200 && res.data) {\r\n          const data = res.data\r\n          this.config = {\r\n            basePrice: Number(data.base_price || 3),\r\n            perKmPrice: Number(data.per_km_price || 1),\r\n            weatherRate: Number(data.weather_rate || 1),\r\n            platformRate: Number(data.platform_rate || 0.1)\r\n          }\r\n          console.log('‚úÖ Á≥ªÁªüÈÖçÁΩÆÂä†ËΩΩÊàêÂäü:', this.config)\r\n        }\r\n      } catch (error) {\r\n        console.error('‚ùå Âä†ËΩΩÈÖçÁΩÆÂ§±Ë¥•:', error)\r\n        // ‰ΩøÁî®ÈªòËÆ§ÈÖçÁΩÆ\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Âä†ËΩΩÁî®Êà∑‰ø°ÊÅØ\r\n     */\r\n    async loadUserInfo() {\r\n      try {\r\n        const res = await getUserInfo()\r\n        if (res.code === 200 && res.data) {\r\n          // Ëá™Âä®Â°´ÂÖÖËÅîÁ≥ªÁîµËØù\r\n          if (res.data.mobile) {\r\n            this.formData.contactPhone = res.data.mobile\r\n          }\r\n          // Ëá™Âä®Â°´ÂÖÖËÅîÁ≥ª‰∫∫\r\n          if (res.data.nickname) {\r\n            this.formData.contactName = res.data.nickname\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('‚ùå Âä†ËΩΩÁî®Êà∑‰ø°ÊÅØÂ§±Ë¥•:', error)\r\n      }\r\n    },\r\n\r\n    /**\r\n     * ÈÄâÊã©ÊúçÂä°Á±ªÂûã\r\n     */\r\n    selectServiceType(type) {\r\n      this.formData.type = type\r\n      this.calculatePrice()\r\n    },\r\n\r\n    /**\r\n     * ÈÄâÊã©Âèñ‰ª∂Âú∞ÂùÄ\r\n     */\r\n    selectPickupAddress() {\r\n      console.log('Ë∑≥ËΩ¨Âà∞ÈÄâÊã©Âèñ‰ª∂Âú∞ÂùÄÈ°µÈù¢')\r\n      uni.navigateTo({\r\n        url: '/pages/address/list?from=order&field=pickup'\r\n      })\r\n    },\r\n\r\n    /**\r\n     * ÈÄâÊã©ÈÄÅËææÂú∞ÂùÄ\r\n     */\r\n    selectDeliveryAddress() {\r\n      console.log('Ë∑≥ËΩ¨Âà∞ÈÄâÊã©ÈÄÅËææÂú∞ÂùÄÈ°µÈù¢')\r\n      uni.navigateTo({\r\n        url: '/pages/address/list?from=order&field=delivery'\r\n      })\r\n    },\r\n\r\n    /**\r\n     * ËÆ°ÁÆóËÆ¢Âçï‰ª∑Ê†º\r\n     */\r\n    calculatePrice() {\r\n      // TODO: ÂÆûÈôÖÂ∫îËØ•Ê†πÊçÆË∑ùÁ¶ªËÆ°ÁÆóÔºåËøôÈáå‰ΩøÁî®ÁÆÄÂåñÁâàÊú¨\r\n      // Âü∫Á°Ä‰ª∑Ê†º = Ëµ∑Ê≠•‰ª∑ + Âõ∫ÂÆöÈáåÁ®ãË¥π\r\n      const baseFee = this.config.basePrice\r\n      const distanceFee = 2 * this.config.perKmPrice // ÂÅáËÆæÂõ∫ÂÆö2ÂÖ¨Èáå\r\n      const subtotal = baseFee + distanceFee\r\n      const total = subtotal * this.config.weatherRate\r\n\r\n      this.estimatedPrice = total.toFixed(2)\r\n\r\n      this.priceBreakdown = {\r\n        basePrice: baseFee.toFixed(2),\r\n        distanceFee: distanceFee.toFixed(2),\r\n        weatherRate: this.config.weatherRate\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Ë°®ÂçïÈ™åËØÅ\r\n     */\r\n    validateForm() {\r\n      if (!this.formData.type) {\r\n        uni.showToast({ title: 'ËØ∑ÈÄâÊã©ÊúçÂä°Á±ªÂûã', icon: 'none' })\r\n        return false\r\n      }\r\n\r\n      if (!this.formData.goodsDesc.trim()) {\r\n        uni.showToast({ title: 'ËØ∑ËæìÂÖ•Áâ©ÂìÅ‰ø°ÊÅØ', icon: 'none' })\r\n        return false\r\n      }\r\n\r\n      if (!this.formData.pickupAddress) {\r\n        uni.showToast({ title: 'ËØ∑ÈÄâÊã©Âèñ‰ª∂Âú∞ÂùÄ', icon: 'none' })\r\n        return false\r\n      }\r\n\r\n      if (!this.formData.deliveryAddress) {\r\n        uni.showToast({ title: 'ËØ∑ÈÄâÊã©ÈÄÅËææÂú∞ÂùÄ', icon: 'none' })\r\n        return false\r\n      }\r\n\r\n      // È™åËØÅÊâãÊú∫Âè∑\r\n      const phoneReg = /^1[3-9]\\d{9}$/\r\n      if (!phoneReg.test(this.formData.contactPhone)) {\r\n        uni.showToast({ title: 'ËØ∑ËæìÂÖ•Ê≠£Á°ÆÁöÑÊâãÊú∫Âè∑', icon: 'none' })\r\n        return false\r\n      }\r\n\r\n      if (!this.formData.contactName.trim()) {\r\n        uni.showToast({ title: 'ËØ∑ËæìÂÖ•ËÅîÁ≥ª‰∫∫ÂßìÂêç', icon: 'none' })\r\n        return false\r\n      }\r\n\r\n      return true\r\n    },\r\n\r\n    /**\r\n     * Êèê‰∫§ËÆ¢Âçï\r\n     */\r\n    async submitOrder() {\r\n      // Ë°®ÂçïÈ™åËØÅ\r\n      if (!this.validateForm()) {\r\n        return\r\n      }\r\n\r\n      try {\r\n        uni.showLoading({ title: 'Êèê‰∫§‰∏≠...' })\r\n\r\n        // ÊûÑÈÄ†ËÆ¢ÂçïÊï∞ÊçÆ - ÂÆåÂÖ®ÂåπÈÖçÂêéÁ´Ø OrderCreateDTO\r\n        const orderData = {\r\n          type: this.formData.type, // ËÆ¢ÂçïÁ±ªÂûãÔºö1-Â∏Æ‰π∞, 2-Â∏ÆÈÄÅ, 3-Â∏ÆÂèñ, 4-ÂÖ®ËÉΩ\r\n          goodsDesc: this.formData.goodsDesc, // Áâ©ÂìÅÊèèËø∞\r\n          pickupAddr: this.formData.pickupAddress.detail, // ÂèñË¥ßÂú∞ÂùÄÔºàËØ¶ÁªÜÈó®ÁâåÂè∑Ôºâ\r\n          pickupLat: this.formData.pickupAddress.lat || 23.123456, // ÂèñË¥ßÁ∫¨Â∫¶ÔºàÈªòËÆ§ÂÄºÔºâ\r\n          pickupLng: this.formData.pickupAddress.lng || 113.123456, // ÂèñË¥ßÁªèÂ∫¶ÔºàÈªòËÆ§ÂÄºÔºâ\r\n          deliveryAddr: this.formData.deliveryAddress.detail, // ÈÄÅË¥ßÂú∞ÂùÄÔºàËØ¶ÁªÜÈó®ÁâåÂè∑Ôºâ\r\n          deliveryLat: this.formData.deliveryAddress.lat || 23.123456, // ÈÄÅË¥ßÁ∫¨Â∫¶ÔºàÈªòËÆ§ÂÄºÔºâ\r\n          deliveryLng: this.formData.deliveryAddress.lng || 113.123456, // ÈÄÅË¥ßÁªèÂ∫¶ÔºàÈªòËÆ§ÂÄºÔºâ\r\n          contactName: this.formData.contactName, // Êî∂Ë¥ß‰∫∫ÂßìÂêç\r\n          contactPhone: this.formData.contactPhone, // Êî∂Ë¥ß‰∫∫ÁîµËØù\r\n          weight: this.formData.weight, // ÈáçÈáèÔºàÂèØÈÄâÔºâ\r\n          tags: this.formData.tags || undefined, // Ê†áÁ≠æÔºàÂèØÈÄâÔºâ\r\n          distance: this.formData.distance || undefined // Ë∑ùÁ¶ªÔºàÂèØÈÄâÔºâ\r\n        }\r\n\r\n        console.log('üì§ Êèê‰∫§ËÆ¢ÂçïÊï∞ÊçÆ:', orderData)\r\n\r\n        const res = await createOrder(orderData)\r\n\r\n        console.log('üì• ÂàõÂª∫ËÆ¢ÂçïÂìçÂ∫î:', JSON.stringify(res, null, 2))\r\n\r\n        uni.hideLoading()\r\n\r\n        if (res.code === 200) {\r\n          const orderInfo = res.data\r\n          console.log('‚úÖ ËÆ¢Âçï‰ø°ÊÅØ:', orderInfo)\r\n\r\n          // ÂêéÁ´ØËøîÂõûÁöÑÂ≠óÊÆµÂêçÔºöid Âíå totalFee\r\n          const orderId = orderInfo.id\r\n          const totalAmount = orderInfo.totalFee || '0.00'\r\n\r\n          console.log('ËÆ¢ÂçïID:', orderId)\r\n          console.log('ËÆ¢ÂçïÈáëÈ¢ù:', totalAmount)\r\n\r\n          if (!orderId) {\r\n            console.error('‚ùå ËÆ¢ÂçïID‰∏çÂ≠òÂú®ÔºåÊó†Ê≥ïË∑≥ËΩ¨ÊîØ‰ªòÈ°µÈù¢')\r\n            uni.showToast({\r\n              title: 'ËÆ¢ÂçïÂàõÂª∫Â§±Ë¥•ÔºåÁº∫Â∞ëËÆ¢ÂçïID',\r\n              icon: 'none',\r\n              duration: 2000\r\n            })\r\n            return\r\n          }\r\n\r\n          uni.showToast({\r\n            title: 'ËÆ¢ÂçïÂàõÂª∫ÊàêÂäü',\r\n            icon: 'success',\r\n            duration: 1500\r\n          })\r\n\r\n          // Ë∑≥ËΩ¨Âà∞ÊîØ‰ªòÈ°µÈù¢\r\n          setTimeout(() => {\r\n            uni.navigateTo({\r\n              url: `/pages/order/payment?orderId=${orderId}&totalAmount=${totalAmount}`\r\n            })\r\n          }, 1500)\r\n        } else {\r\n          uni.showToast({\r\n            title: res.message || 'ÂàõÂª∫Â§±Ë¥•',\r\n            icon: 'none'\r\n          })\r\n        }\r\n      } catch (error) {\r\n        uni.hideLoading()\r\n        console.error('‚ùå ÂàõÂª∫ËÆ¢ÂçïÂ§±Ë¥•:', error)\r\n        uni.showToast({\r\n          title: 'ÂàõÂª∫Â§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï',\r\n          icon: 'none'\r\n        })\r\n      }\r\n    },\r\n\r\n    /**\r\n     * ËøîÂõû‰∏ä‰∏ÄÈ°µ\r\n     */\r\n    goBack() {\r\n      uni.navigateBack()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.order-create-container {\r\n  min-height: 100vh;\r\n  background-color: #f5f5f5;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n/* ÂØºËà™Ê†è */\r\n.nav-bar {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  height: 44px;\r\n  padding: 0 15px;\r\n  background-color: #fff;\r\n  border-bottom: 1px solid #eee;\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  z-index: 100;\r\n}\r\n\r\n.nav-back {\r\n  width: 40px;\r\n  height: 40px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 24px;\r\n  color: #333;\r\n  cursor: pointer;\r\n}\r\n\r\n.nav-title {\r\n  font-size: 17px;\r\n  font-weight: 600;\r\n  color: #333;\r\n}\r\n\r\n.nav-placeholder {\r\n  width: 40px;\r\n}\r\n\r\n/* Ë°®ÂçïÂÜÖÂÆπ */\r\n.form-content {\r\n  flex: 1;\r\n  margin-top: 54px;\r\n  margin-bottom: 70px;\r\n  padding: 15px;\r\n}\r\n\r\n.form-section {\r\n  background-color: #fff;\r\n  border-radius: 12px;\r\n  padding: 20px;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.section-title {\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: #333;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.section-title.required::before {\r\n  content: '*';\r\n  color: #ff4d4f;\r\n  margin-right: 4px;\r\n}\r\n\r\n/* ÊúçÂä°Á±ªÂûã */\r\n.service-type-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(4, 1fr);\r\n  gap: 10px;\r\n}\r\n\r\n.service-type-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 15px 5px;\r\n  background-color: #f5f7fa;\r\n  border-radius: 8px;\r\n  border: 2px solid transparent;\r\n  cursor: pointer;\r\n  transition: all 0.3s;\r\n}\r\n\r\n.service-type-item.active {\r\n  background-color: #f0f4ff;\r\n  border-color: #667eea;\r\n}\r\n\r\n.service-icon {\r\n  font-size: 24px;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.service-name {\r\n  font-size: 12px;\r\n  color: #666;\r\n}\r\n\r\n.service-type-item.active .service-name {\r\n  color: #667eea;\r\n  font-weight: 600;\r\n}\r\n\r\n/* ËæìÂÖ•Ê°Ü */\r\n.form-input-wrapper {\r\n  position: relative;\r\n}\r\n\r\n.form-input {\r\n  width: 100%;\r\n  height: 44px;\r\n  padding: 0 15px;\r\n  background-color: #f5f7fa;\r\n  border-radius: 8px;\r\n  font-size: 15px;\r\n  color: #333;\r\n}\r\n\r\n.form-textarea {\r\n  width: 100%;\r\n  min-height: 80px;\r\n  padding: 12px 15px;\r\n  background-color: #f5f7fa;\r\n  border-radius: 8px;\r\n  font-size: 15px;\r\n  color: #333;\r\n  line-height: 1.6;\r\n}\r\n\r\n.char-count {\r\n  position: absolute;\r\n  bottom: 8px;\r\n  right: 12px;\r\n  font-size: 12px;\r\n  color: #999;\r\n}\r\n\r\n/* Âú∞ÂùÄÈÄâÊã© */\r\n.address-selector {\r\n  min-height: 80px;\r\n  display: flex;\r\n  align-items: center;\r\n  background-color: #f5f7fa;\r\n  border-radius: 8px;\r\n  padding: 12px 15px;\r\n  cursor: pointer;\r\n}\r\n\r\n.address-content {\r\n  flex: 1;\r\n}\r\n\r\n.address-header {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.contact-name {\r\n  font-size: 15px;\r\n  font-weight: 600;\r\n  color: #333;\r\n  margin-right: 12px;\r\n}\r\n\r\n.contact-phone {\r\n  font-size: 13px;\r\n  color: #666;\r\n}\r\n\r\n.contact-info {\r\n  margin-bottom: 6px;\r\n}\r\n\r\n.contact-person {\r\n  font-size: 13px;\r\n  color: #666;\r\n}\r\n\r\n.address-detail {\r\n  font-size: 13px;\r\n  color: #666;\r\n  line-height: 1.5;\r\n}\r\n\r\n.address-placeholder {\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n\r\n.placeholder-text {\r\n  font-size: 14px;\r\n  color: #999;\r\n}\r\n\r\n.placeholder-arrow {\r\n  font-size: 20px;\r\n  color: #999;\r\n}\r\n\r\n/* ‰ª∑Ê†º */\r\n.price-section {\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n}\r\n\r\n.price-section .section-title {\r\n  color: #fff;\r\n}\r\n\r\n.price-display {\r\n  display: flex;\r\n  align-items: baseline;\r\n  margin: 15px 0;\r\n}\r\n\r\n.price-symbol {\r\n  font-size: 24px;\r\n  color: #fff;\r\n  margin-right: 4px;\r\n}\r\n\r\n.price-value {\r\n  font-size: 40px;\r\n  font-weight: bold;\r\n  color: #fff;\r\n}\r\n\r\n.price-breakdown {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 6px;\r\n}\r\n\r\n.breakdown-item {\r\n  font-size: 13px;\r\n  color: rgba(255, 255, 255, 0.8);\r\n}\r\n\r\n/* Â∫ïÈÉ®ÊåâÈíÆ */\r\n.bottom-bar {\r\n  position: fixed;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 10px 15px;\r\n  background-color: #fff;\r\n  border-top: 1px solid #eee;\r\n  box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.bar-left {\r\n  flex: 1;\r\n}\r\n\r\n.bar-label {\r\n  font-size: 14px;\r\n  color: #666;\r\n}\r\n\r\n.bar-price {\r\n  font-size: 22px;\r\n  font-weight: bold;\r\n  color: #ff4d4f;\r\n  margin-left: 8px;\r\n}\r\n\r\n.btn-submit {\r\n  width: 120px;\r\n  height: 44px;\r\n  line-height: 44px;\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  color: #fff;\r\n  font-size: 15px;\r\n  font-weight: 600;\r\n  border-radius: 22px;\r\n  border: none;\r\n}\r\n\r\n.btn-submit[disabled] {\r\n  opacity: 0.5;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'E:/Delivery Service Platform/uniapp/pages/order/create.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","getConfigs","getUserInfo","createOrder"],"mappings":"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"}