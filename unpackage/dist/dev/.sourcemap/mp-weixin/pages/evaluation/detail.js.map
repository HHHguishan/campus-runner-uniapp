{"version":3,"file":"detail.js","sources":["pages/evaluation/detail.vue","D:/Users/windows/Downloads/HBuilderX.4.85.2025110510/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvZXZhbHVhdGlvbi9kZXRhaWwudnVl"],"sourcesContent":["<template>\r\n  <view class=\"evaluation-detail-container\">\r\n    <!-- È°∂ÈÉ®ÂØºËà™Ê†è -->\r\n    <view class=\"nav-bar\">\r\n      <view class=\"nav-back\" @click=\"goBack\">\r\n        <text class=\"iconfont\">‚Äπ</text>\r\n      </view>\r\n      <view class=\"nav-title\">ËØÑ‰ª∑ËØ¶ÊÉÖ</view>\r\n      <view class=\"nav-placeholder\"></view>\r\n    </view>\r\n\r\n    <!-- ËØÑ‰ª∑ÂÜÖÂÆπ -->\r\n    <scroll-view class=\"detail-content\" scroll-y>\r\n      <!-- Âä†ËΩΩÁä∂ÊÄÅ -->\r\n      <view class=\"loading-state\" v-if=\"loading\">\r\n        <text>Âä†ËΩΩ‰∏≠...</text>\r\n      </view>\r\n\r\n      <!-- Êó†ËØÑ‰ª∑Áä∂ÊÄÅ -->\r\n      <view class=\"empty-state\" v-else-if=\"!evaluationInfo\">\r\n        <text class=\"empty-icon\">üìù</text>\r\n        <text class=\"empty-text\">ÊöÇÊó†ËØÑ‰ª∑</text>\r\n      </view>\r\n\r\n      <!-- ËØÑ‰ª∑ËØ¶ÊÉÖ -->\r\n      <view class=\"evaluation-detail\" v-else>\r\n        <!-- Áî®Êà∑‰ø°ÊÅØ -->\r\n        <view class=\"user-section\">\r\n          <view class=\"user-avatar\">\r\n            <text>{{ userInfo.userName ? userInfo.userName.substring(0, 1) : 'Áî®' }}</text>\r\n          </view>\r\n          <view class=\"user-info\">\r\n            <text class=\"user-name\">{{ userInfo.userName || 'Áî®Êà∑' }}</text>\r\n            <text class=\"evaluate-time\">{{ formatTime(evaluationInfo.createTime) }}</text>\r\n          </view>\r\n        </view>\r\n\r\n        <!-- ËØÑÂàÜÊòæÁ§∫ -->\r\n        <view class=\"rating-display\">\r\n          <view class=\"stars\">\r\n            <text\r\n              class=\"star-icon\"\r\n              v-for=\"(star, index) in 5\"\r\n              :key=\"index\"\r\n            >\r\n              {{ index < evaluationInfo.rating ? '‚òÖ' : '‚òÜ' }}\r\n            </text>\r\n          </view>\r\n          <text class=\"rating-text\">{{ getRatingText(evaluationInfo.rating) }}</text>\r\n        </view>\r\n\r\n        <!-- ËØÑ‰ª∑Ê†áÁ≠æ -->\r\n        <view class=\"tags-display\" v-if=\"evaluationInfo.tags\">\r\n          <view\r\n            class=\"tag-item\"\r\n            v-for=\"(tag, index) in evaluationInfo.tags.split(',')\"\r\n            :key=\"index\"\r\n          >\r\n            {{ tag }}\r\n          </view>\r\n        </view>\r\n\r\n        <!-- ËØÑ‰ª∑ÂÜÖÂÆπ -->\r\n        <view class=\"comment-display\">\r\n          <text class=\"comment-text\">{{ evaluationInfo.content || '' }}</text>\r\n        </view>\r\n\r\n        <!-- ËÆ¢Âçï‰ø°ÊÅØ -->\r\n        <view class=\"order-info\" v-if=\"orderInfo\">\r\n          <view class=\"info-title\">ËÆ¢Âçï‰ø°ÊÅØ</view>\r\n          <view class=\"info-list\">\r\n            <view class=\"info-item\">\r\n              <text class=\"info-label\">ËÆ¢ÂçïÂè∑</text>\r\n              <text class=\"info-value\">{{ orderInfo.orderNo || '-' }}</text>\r\n            </view>\r\n            <view class=\"info-item\">\r\n              <text class=\"info-label\">ÊúçÂä°Á±ªÂûã</text>\r\n              <text class=\"info-value\">{{ getServiceTypeName(orderInfo.serviceType) }}</text>\r\n            </view>\r\n            <view class=\"info-item\">\r\n              <text class=\"info-label\">ÂÆåÊàêÊó∂Èó¥</text>\r\n              <text class=\"info-value\">{{ formatTime(orderInfo.completeTime) }}</text>\r\n            </view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </scroll-view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { getOrderDetail } from '@/api/order.js'\r\nimport { getEvaluationDetail } from '@/api/order.js'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      orderId: null,\r\n      evaluationInfo: null,\r\n      orderInfo: null,\r\n      userInfo: {},\r\n      loading: true\r\n    }\r\n  },\r\n\r\n  onLoad(options) {\r\n    if (options.orderId) {\r\n      this.orderId = options.orderId\r\n      this.loadEvaluationDetail()\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    /**\r\n     * Âä†ËΩΩËØÑ‰ª∑ËØ¶ÊÉÖ\r\n     */\r\n    async loadEvaluationDetail() {\r\n      try {\r\n        uni.showLoading({ title: 'Âä†ËΩΩ‰∏≠...' })\r\n\r\n        // Âπ∂Ë°åÂä†ËΩΩËØÑ‰ª∑ËØ¶ÊÉÖÂíåËÆ¢ÂçïËØ¶ÊÉÖ\r\n        const [evalRes, orderRes] = await Promise.all([\r\n          getEvaluationDetail(this.orderId),\r\n          getOrderDetail(this.orderId)\r\n        ])\r\n\r\n        uni.hideLoading()\r\n        this.loading = false\r\n\r\n        // Â§ÑÁêÜËØÑ‰ª∑Êï∞ÊçÆ\r\n        if (evalRes.code === 200 && evalRes.data) {\r\n          this.evaluationInfo = evalRes.data\r\n          this.userInfo = evalRes.data.user || {}\r\n          console.log('‚úÖ ËØÑ‰ª∑ËØ¶ÊÉÖÂä†ËΩΩÊàêÂäü:', this.evaluationInfo)\r\n        } else {\r\n          // ËØÑ‰ª∑ÂèØËÉΩ‰∏çÂ≠òÂú®\r\n          this.evaluationInfo = null\r\n        }\r\n\r\n        // Â§ÑÁêÜËÆ¢ÂçïÊï∞ÊçÆ\r\n        if (orderRes.code === 200 && orderRes.data) {\r\n          this.orderInfo = orderRes.data\r\n        }\r\n      } catch (error) {\r\n        uni.hideLoading()\r\n        this.loading = false\r\n        console.error('‚ùå Âä†ËΩΩËØÑ‰ª∑ËØ¶ÊÉÖÂ§±Ë¥•:', error)\r\n        uni.showToast({\r\n          title: 'Âä†ËΩΩÂ§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï',\r\n          icon: 'none'\r\n        })\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Ëé∑ÂèñËØÑÂàÜÊñáÂ≠ó\r\n     */\r\n    getRatingText(rating) {\r\n      const texts = {\r\n        1: 'ÈùûÂ∏∏‰∏çÊª°ÊÑè',\r\n        2: '‰∏çÊª°ÊÑè',\r\n        3: '‰∏ÄËà¨',\r\n        4: 'Êª°ÊÑè',\r\n        5: 'ÈùûÂ∏∏Êª°ÊÑè'\r\n      }\r\n      return texts[rating] || ''\r\n    },\r\n\r\n    /**\r\n     * Ëé∑ÂèñÊúçÂä°Á±ªÂûãÂêçÁß∞\r\n     */\r\n    getServiceTypeName(type) {\r\n      const types = {\r\n        1: 'Â∏ÆÊàë‰π∞',\r\n        2: 'Â∏ÆÊàëÈÄÅ',\r\n        3: 'Â∏ÆÊàëÂèñ',\r\n        4: 'ÂÖ®ËÉΩ'\r\n      }\r\n      return types[type] || '-'\r\n    },\r\n\r\n    /**\r\n     * Ê†ºÂºèÂåñÊó∂Èó¥\r\n     */\r\n    formatTime(time) {\r\n      if (!time) return '-'\r\n      const date = new Date(time)\r\n      const year = date.getFullYear()\r\n      const month = String(date.getMonth() + 1).padStart(2, '0')\r\n      const day = String(date.getDate()).padStart(2, '0')\r\n      const hours = String(date.getHours()).padStart(2, '0')\r\n      const minutes = String(date.getMinutes()).padStart(2, '0')\r\n      return `${year}-${month}-${day} ${hours}:${minutes}`\r\n    },\r\n\r\n    /**\r\n     * ËøîÂõû‰∏ä‰∏ÄÈ°µ\r\n     */\r\n    goBack() {\r\n      uni.navigateBack()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.evaluation-detail-container {\r\n  min-height: 100vh;\r\n  background-color: #f5f5f5;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n/* ÂØºËà™Ê†è */\r\n.nav-bar {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  height: 44px;\r\n  padding: 0 15px;\r\n  background-color: #fff;\r\n  border-bottom: 1px solid #eee;\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  z-index: 100;\r\n}\r\n\r\n.nav-back,\r\n.nav-placeholder {\r\n  width: 40px;\r\n  height: 40px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 24px;\r\n  color: #333;\r\n  cursor: pointer;\r\n}\r\n\r\n.nav-title {\r\n  font-size: 17px;\r\n  font-weight: 600;\r\n  color: #333;\r\n}\r\n\r\n/* ËØ¶ÊÉÖÂÜÖÂÆπ */\r\n.detail-content {\r\n  flex: 1;\r\n  margin-top: 54px;\r\n  padding: 15px;\r\n  overflow-y: auto;\r\n}\r\n\r\n/* Âä†ËΩΩÁä∂ÊÄÅ */\r\n.loading-state,\r\n.empty-state {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 60px 20px;\r\n  color: #999;\r\n}\r\n\r\n.empty-icon {\r\n  font-size: 60px;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.empty-text {\r\n  font-size: 16px;\r\n}\r\n\r\n/* ËØÑ‰ª∑ËØ¶ÊÉÖ */\r\n.evaluation-detail {\r\n  background-color: #fff;\r\n  border-radius: 12px;\r\n  padding: 25px;\r\n}\r\n\r\n/* Áî®Êà∑‰ø°ÊÅØ */\r\n.user-section {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n  padding-bottom: 20px;\r\n  border-bottom: 1px solid #f5f5f5;\r\n}\r\n\r\n.user-avatar {\r\n  width: 50px;\r\n  height: 50px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  border-radius: 50%;\r\n  color: #fff;\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  margin-right: 12px;\r\n}\r\n\r\n.user-info {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.user-name {\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: #333;\r\n  margin-bottom: 6px;\r\n}\r\n\r\n.evaluate-time {\r\n  font-size: 13px;\r\n  color: #999;\r\n}\r\n\r\n/* ËØÑÂàÜÊòæÁ§∫ */\r\n.rating-display {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  padding: 25px 0;\r\n  border-bottom: 1px solid #f5f5f5;\r\n}\r\n\r\n.stars {\r\n  display: flex;\r\n  gap: 8px;\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.star-icon {\r\n  font-size: 40px;\r\n  color: #ffd700;\r\n}\r\n\r\n.rating-text {\r\n  font-size: 15px;\r\n  color: #667eea;\r\n  font-weight: 600;\r\n}\r\n\r\n/* ËØÑ‰ª∑Ê†áÁ≠æ */\r\n.tags-display {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 10px;\r\n  padding: 20px 0;\r\n  border-bottom: 1px solid #f5f5f5;\r\n}\r\n\r\n.tag-item {\r\n  padding: 8px 16px;\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  border-radius: 20px;\r\n  font-size: 13px;\r\n  color: #fff;\r\n}\r\n\r\n/* ËØÑ‰ª∑ÂÜÖÂÆπ */\r\n.comment-display {\r\n  padding: 20px 0;\r\n  border-bottom: 1px solid #f5f5f5;\r\n}\r\n\r\n.comment-text {\r\n  font-size: 15px;\r\n  color: #333;\r\n  line-height: 1.8;\r\n}\r\n\r\n/* ËÆ¢Âçï‰ø°ÊÅØ */\r\n.order-info {\r\n  padding: 20px 0;\r\n}\r\n\r\n.info-title {\r\n  font-size: 15px;\r\n  font-weight: 600;\r\n  color: #333;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.info-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n}\r\n\r\n.info-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.info-label {\r\n  font-size: 14px;\r\n  color: #666;\r\n}\r\n\r\n.info-value {\r\n  font-size: 14px;\r\n  color: #333;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'E:/Delivery Service Platform/uniapp/pages/evaluation/detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","getEvaluationDetail","getOrderDetail"],"mappings":";;;AA8FA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,SAAS;AAAA,MACT,gBAAgB;AAAA,MAChB,WAAW;AAAA,MACX,UAAU,CAAE;AAAA,MACZ,SAAS;AAAA,IACX;AAAA,EACD;AAAA,EAED,OAAO,SAAS;AACd,QAAI,QAAQ,SAAS;AACnB,WAAK,UAAU,QAAQ;AACvB,WAAK,qBAAqB;AAAA,IAC5B;AAAA,EACD;AAAA,EAED,SAAS;AAAA;AAAA;AAAA;AAAA,IAIP,MAAM,uBAAuB;AAC3B,UAAI;AACFA,sBAAAA,MAAI,YAAY,EAAE,OAAO,UAAU;AAGnC,cAAM,CAAC,SAAS,QAAQ,IAAI,MAAM,QAAQ,IAAI;AAAA,UAC5CC,UAAmB,oBAAC,KAAK,OAAO;AAAA,UAChCC,UAAc,eAAC,KAAK,OAAO;AAAA,SAC5B;AAEDF,sBAAAA,MAAI,YAAY;AAChB,aAAK,UAAU;AAGf,YAAI,QAAQ,SAAS,OAAO,QAAQ,MAAM;AACxC,eAAK,iBAAiB,QAAQ;AAC9B,eAAK,WAAW,QAAQ,KAAK,QAAQ,CAAC;AACtCA,wBAAA,MAAA,MAAA,OAAA,sCAAY,eAAe,KAAK,cAAc;AAAA,eACzC;AAEL,eAAK,iBAAiB;AAAA,QACxB;AAGA,YAAI,SAAS,SAAS,OAAO,SAAS,MAAM;AAC1C,eAAK,YAAY,SAAS;AAAA,QAC5B;AAAA,MACA,SAAO,OAAO;AACdA,sBAAAA,MAAI,YAAY;AAChB,aAAK,UAAU;AACfA,sBAAAA,MAAA,MAAA,SAAA,sCAAc,eAAe,KAAK;AAClCA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,SACP;AAAA,MACH;AAAA,IACD;AAAA;AAAA;AAAA;AAAA,IAKD,cAAc,QAAQ;AACpB,YAAM,QAAQ;AAAA,QACZ,GAAG;AAAA,QACH,GAAG;AAAA,QACH,GAAG;AAAA,QACH,GAAG;AAAA,QACH,GAAG;AAAA,MACL;AACA,aAAO,MAAM,MAAM,KAAK;AAAA,IACzB;AAAA;AAAA;AAAA;AAAA,IAKD,mBAAmB,MAAM;AACvB,YAAM,QAAQ;AAAA,QACZ,GAAG;AAAA,QACH,GAAG;AAAA,QACH,GAAG;AAAA,QACH,GAAG;AAAA,MACL;AACA,aAAO,MAAM,IAAI,KAAK;AAAA,IACvB;AAAA;AAAA;AAAA;AAAA,IAKD,WAAW,MAAM;AACf,UAAI,CAAC;AAAM,eAAO;AAClB,YAAM,OAAO,IAAI,KAAK,IAAI;AAC1B,YAAM,OAAO,KAAK,YAAY;AAC9B,YAAM,QAAQ,OAAO,KAAK,SAAQ,IAAK,CAAC,EAAE,SAAS,GAAG,GAAG;AACzD,YAAM,MAAM,OAAO,KAAK,QAAS,CAAA,EAAE,SAAS,GAAG,GAAG;AAClD,YAAM,QAAQ,OAAO,KAAK,SAAU,CAAA,EAAE,SAAS,GAAG,GAAG;AACrD,YAAM,UAAU,OAAO,KAAK,WAAY,CAAA,EAAE,SAAS,GAAG,GAAG;AACzD,aAAO,GAAG,IAAI,IAAI,KAAK,IAAI,GAAG,IAAI,KAAK,IAAI,OAAO;AAAA,IACnD;AAAA;AAAA;AAAA;AAAA,IAKD,SAAS;AACPA,oBAAAA,MAAI,aAAa;AAAA,IACnB;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzMA,GAAG,WAAW,eAAe;"}